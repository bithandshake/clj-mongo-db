<!DOCTYPE html>
<html><html><head><style type="text/css">body{margin:12px 0 0 560px;padding:60px 48px}button{background-color:transparent;border:none;cursor:pointer;padding:0;user-select:none}button:hover{opacity:.5}div{box-sizing:border-box}pre{display:block;margin:0;letter-spacing:.8px}.scroll-x{overflow-x:auto}.scroll-y{flex-grow:1;overflow-y:auto}a,a:active,a:hover,a:visited{display:block;text-decoration:none}a.inline-link{display:inline-block}a.inline-link:hover{text-decoration:underline}.button{letter-spacing:.5px;white-space:inherit}.button:hover{background-color:#f0f0f0}.button--active{background-color:#f3f3f3}.button--active:hover{background-color:#f0f0f0}.text--xxs{font-size:10px;line-height:18px}.text--xs{font-size:11px;line-height:18px}.text--s{font-size:12px;line-height:18px}.text--m{font-size:13px;line-height:18px}.text--l{font-size:14px;line-height:18px}.text--xl{font-size:16px;line-height:24px}.text--xxl{font-size:18px;line-height:24px}.text--semi-bold{font-weight:500}.text--bold{font-weight:600}.text--uppercase{text-transform:uppercase}.text--boxed{background-color:#fafafa;padding:12px 8px}.text--hidden{display:none}.text--wrap{-white-space:normal;white-space:pre-wrap}.image--boxed{background-color:#fafafa;padding:12px 8px}.color--black{color:#000000}.color--hard-grey{color:#404040}.color--soft-grey{color:#808080}.color--hard-blue{color:#0088cc}.color--soft-blue{color:#55aabb}.color--hard-purple{color:#8800cc}.color--soft-purple{color:#aa55bb}.color--hard-red{color:#cc00aa}[data-collapsed="true"] .snippet--text{display:none}[data-collapsible="true"] .snippet--header::after{align-items:center;content:'▼';display:flex;font-size:8px;justify-content:center;height:18px;width:18px}[data-collapsible="true"][data-collapsed="false"] .snippet--header::after{content:'▲'}#top-bar{background-color:#ffffff;border-bottom:1px solid #e0e0e0;display:flex;gap:6px;height:60px;left:0;padding-left:18px;position:fixed;top:0;width:100%}#top-bar--library-uri{padding:21px 18px;position:absolute;right:0;top:0}#top-bar--library-uri:hover{background-color:#f0f0f0}#top-bar--library-name{padding:18px 0;text-transform:uppercase}#top-bar--library-version{margin-top:12px}#bottom-bar{background-color:white;border-top:1px solid #e0e0e0;bottom:0;display:flex;justify-content:right;position:fixed;right:0;width:calc(100% - 560px)}#bottom-bar--credits-link{padding:12px 18px}#bottom-bar--credits-link:hover{background-color:#f0f0f0}#primary-list{background-color:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;height:calc(100vh - 60px);left:0;padding:12px 0;position:fixed;top:60px;width:280px}#secondary-list{background-color:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;height:calc(100vh - 60px);left:280px;padding:12px 0;position:fixed;top:60px;width:280px}#primary-list,#secondary-list{z-index:9999}#primary-list .text--xs,#secondary-list .text--xs{padding-left:12px}.primary-list--container,.secondary-list--container{margin-bottom:12px}#primary-list .button,#secondary-list .button{padding:3px 12px}#primary-list .label,#secondary-list .label{padding:0 12px}.section{padding:72px 0}.section--header{border-bottom:1px solid #e0e0e0;padding-bottom:8px;margin-bottom:12px}.snippets{display:flex;flex-direction:column;gap:24px}.snippet--header{display:flex;gap:4px}.snippet--preview-image{border:1px solid #dedede;display:block;max-height:480px;max-width:640px;min-height:48px;min-width:64px}.snippet--text span{opacity:.65}</style><script type="text/javascript">function toggleCollapsible(collapsibleId){collapsible=document.getElementById(collapsibleId);if(collapsible.dataset.collapsed==='true'){collapsible.dataset.collapsed='false';}else{collapsible.dataset.collapsed='true';}}function toggleSidebar(sidebarId){sidebar=document.getElementById(sidebarId);if(sidebar.dataset.hidden==='true'){sidebar.dataset.hidden='false';}else{sidebar.dataset.hidden='true';}}</script><title>monger-utils 0.8.2.4 documentation</title><link href="https://raw.githubusercontent.com/mt-extensions/monger-utils/release/mt-extensions-logo.png" rel="icon" type="image/png"></head><body><div id="primary-list"><div class="scroll-y"><div class="primary-list--container"><pre class="label color--soft-grey text--xxs text--uppercase">Clojure namespaces</pre><a href="https://mt-extensions.github.io/monger-utils/clj/monger/stages/api.html"><pre class="button color--hard-blue text--m button--active">monger.stages.api</pre></a><a href="https://mt-extensions.github.io/monger-utils/clj/monger/tools/api.html"><pre class="button color--hard-blue text--m ">monger.tools.api</pre></a></div></div></div><div id="secondary-list"><div class="scroll-y"><div class="secondary-list--container"><pre class="label color--soft-grey text--xxs text--uppercase">Tutorials</pre><a href="#demo"><pre class="button color--hard-purple text--m">Demo</pre></a></div><div class="secondary-list--container"><pre class="label color--soft-grey text--xxs text--uppercase">Declarations</pre><a href="#adapt-collection-name"><pre class="button color--hard-blue text--m">adapt-collection-name</pre></a><a href="#adapt-collection-namespace"><pre class="button color--hard-blue text--m">adapt-collection-namespace</pre></a><a href="#adapt-collections-name"><pre class="button color--hard-blue text--m">adapt-collections-name</pre></a><a href="#adapt-collections-namespace"><pre class="button color--hard-blue text--m">adapt-collections-namespace</pre></a><a href="#adapt-database-name"><pre class="button color--hard-blue text--m">adapt-database-name</pre></a><a href="#adapt-databases-name"><pre class="button color--hard-blue text--m">adapt-databases-name</pre></a><a href="#adapt-document"><pre class="button color--hard-blue text--m">adapt-document</pre></a><a href="#adapt-document-id"><pre class="button color--hard-blue text--m">adapt-document-id</pre></a><a href="#adapt-documents"><pre class="button color--hard-blue text--m">adapt-documents</pre></a><a href="#adapt-documents-id"><pre class="button color--hard-blue text--m">adapt-documents-id</pre></a><a href="#adapt-locale"><pre class="button color--hard-blue text--m">adapt-locale</pre></a><a href="#adapt-locales"><pre class="button color--hard-blue text--m">adapt-locales</pre></a><a href="#adapt-pipeline-stage"><pre class="button color--hard-blue text--m">adapt-pipeline-stage</pre></a><a href="#adapt-pipeline-stage-id"><pre class="button color--hard-blue text--m">adapt-pipeline-stage-id</pre></a><a href="#adapt-pipeline-stages"><pre class="button color--hard-blue text--m">adapt-pipeline-stages</pre></a><a href="#adapt-pipeline-stages-id"><pre class="button color--hard-blue text--m">adapt-pipeline-stages-id</pre></a><a href="#adapt-projection"><pre class="button color--hard-blue text--m">adapt-projection</pre></a><a href="#adapt-projection-id"><pre class="button color--hard-blue text--m">adapt-projection-id</pre></a><a href="#adapt-projections"><pre class="button color--hard-blue text--m">adapt-projections</pre></a><a href="#adapt-projections-id"><pre class="button color--hard-blue text--m">adapt-projections-id</pre></a><a href="#adapt-queries"><pre class="button color--hard-blue text--m">adapt-queries</pre></a><a href="#adapt-queries-id"><pre class="button color--hard-blue text--m">adapt-queries-id</pre></a><a href="#adapt-query"><pre class="button color--hard-blue text--m">adapt-query</pre></a><a href="#adapt-query-id"><pre class="button color--hard-blue text--m">adapt-query-id</pre></a><a href="#apply-document-changes"><pre class="button color--hard-blue text--m">apply-document-changes</pre></a><a href="#apply-documents-changes"><pre class="button color--hard-blue text--m">apply-documents-changes</pre></a><a href="#assoc-document-copy-marker"><pre class="button color--hard-blue text--m">assoc-document-copy-marker</pre></a><a href="#assoc-document-id"><pre class="button color--hard-blue text--m">assoc-document-id</pre></a><a href="#assoc-document-position"><pre class="button color--hard-blue text--m">assoc-document-position</pre></a><a href="#assoc-documents-copy-marker"><pre class="button color--hard-blue text--m">assoc-documents-copy-marker</pre></a><a href="#assoc-documents-id"><pre class="button color--hard-blue text--m">assoc-documents-id</pre></a><a href="#assoc-documents-position"><pre class="button color--hard-blue text--m">assoc-documents-position</pre></a><a href="#check-collection-name"><pre class="button color--hard-blue text--m">check-collection-name</pre></a><a href="#check-collection-namespace"><pre class="button color--hard-blue text--m">check-collection-namespace</pre></a><a href="#check-collections-name"><pre class="button color--hard-blue text--m">check-collections-name</pre></a><a href="#check-collections-namespace"><pre class="button color--hard-blue text--m">check-collections-namespace</pre></a><a href="#check-database-name"><pre class="button color--hard-blue text--m">check-database-name</pre></a><a href="#check-databases-name"><pre class="button color--hard-blue text--m">check-databases-name</pre></a><a href="#check-document"><pre class="button color--hard-blue text--m">check-document</pre></a><a href="#check-documents"><pre class="button color--hard-blue text--m">check-documents</pre></a><a href="#check-id"><pre class="button color--hard-blue text--m">check-id</pre></a><a href="#check-ids"><pre class="button color--hard-blue text--m">check-ids</pre></a><a href="#check-locale"><pre class="button color--hard-blue text--m">check-locale</pre></a><a href="#check-locales"><pre class="button color--hard-blue text--m">check-locales</pre></a><a href="#check-pipeline-stage"><pre class="button color--hard-blue text--m">check-pipeline-stage</pre></a><a href="#check-pipeline-stages"><pre class="button color--hard-blue text--m">check-pipeline-stages</pre></a><a href="#check-projection"><pre class="button color--hard-blue text--m">check-projection</pre></a><a href="#check-projections"><pre class="button color--hard-blue text--m">check-projections</pre></a><a href="#check-queries"><pre class="button color--hard-blue text--m">check-queries</pre></a><a href="#check-query"><pre class="button color--hard-blue text--m">check-query</pre></a><a href="#dissoc-document-id"><pre class="button color--hard-blue text--m">dissoc-document-id</pre></a><a href="#dissoc-documents-id"><pre class="button color--hard-blue text--m">dissoc-documents-id</pre></a><a href="#normalize-collection-name"><pre class="button color--hard-blue text--m">normalize-collection-name</pre></a><a href="#normalize-collection-namespace"><pre class="button color--hard-blue text--m">normalize-collection-namespace</pre></a><a href="#normalize-collections-name"><pre class="button color--hard-blue text--m">normalize-collections-name</pre></a><a href="#normalize-collections-namespace"><pre class="button color--hard-blue text--m">normalize-collections-namespace</pre></a><a href="#normalize-database-name"><pre class="button color--hard-blue text--m">normalize-database-name</pre></a><a href="#normalize-databases-name"><pre class="button color--hard-blue text--m">normalize-databases-name</pre></a><a href="#normalize-document"><pre class="button color--hard-blue text--m">normalize-document</pre></a><a href="#normalize-document-id"><pre class="button color--hard-blue text--m">normalize-document-id</pre></a><a href="#normalize-documents"><pre class="button color--hard-blue text--m">normalize-documents</pre></a><a href="#normalize-documents-id"><pre class="button color--hard-blue text--m">normalize-documents-id</pre></a><a href="#normalize-locale"><pre class="button color--hard-blue text--m">normalize-locale</pre></a><a href="#normalize-locales"><pre class="button color--hard-blue text--m">normalize-locales</pre></a><a href="#parse-id"><pre class="button color--hard-blue text--m">parse-id</pre></a><a href="#parse-ids"><pre class="button color--hard-blue text--m">parse-ids</pre></a><a href="#postpare-document"><pre class="button color--hard-blue text--m">postpare-document</pre></a><a href="#postpare-documents"><pre class="button color--hard-blue text--m">postpare-documents</pre></a><a href="#prepare-document"><pre class="button color--hard-blue text--m">prepare-document</pre></a><a href="#prepare-documents"><pre class="button color--hard-blue text--m">prepare-documents</pre></a><a href="#prototype-document"><pre class="button color--hard-blue text--m">prototype-document</pre></a><a href="#prototype-documents"><pre class="button color--hard-blue text--m">prototype-documents</pre></a><a href="#result-acknowledged_"><pre class="button color--hard-blue text--m">result-acknowledged?</pre></a><a href="#results-acknowledged_"><pre class="button color--hard-blue text--m">results-acknowledged?</pre></a><a href="#shift-document-position"><pre class="button color--hard-blue text--m">shift-document-position</pre></a><a href="#shift-documents-position"><pre class="button color--hard-blue text--m">shift-documents-position</pre></a><a href="#unparse-id"><pre class="button color--hard-blue text--m">unparse-id</pre></a><a href="#unparse-ids"><pre class="button color--hard-blue text--m">unparse-ids</pre></a><a href="#updated-existing_"><pre class="button color--hard-blue text--m">updated-existing?</pre></a><a href="#updated-existings_"><pre class="button color--hard-blue text--m">updated-existings?</pre></a></div></div></div><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">Clojure namespace</pre><pre class="color--black text--xxl text--wrap text--bold">monger.stages.api</pre></div><div class="sections"><div class="section" id="demo"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">tutorial</pre><pre class="color--hard-purple text--xxl text--wrap text--bold">Demo</pre></div><div class="snippets"><div class="snippet" data-collapsed="false" data-collapsible="false" id="q951952de-b7fb-48ae-891f-10572142f03e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(let [document {:my-namespace/my-id "MyObjectId" :my-namespace/my-key "My value" ...}<br>      result   (monger.collection/insert-and-return MY-DB (-&gt; document (prototype-document {:prototype-f (fn [%] ...)})<br>                                                                       (prepare-document   {:prepare-f   (fn [%] ...)})<br>                                                                       (postpare-document  {:postpare-f  (fn [%] ...)})<br>                                                                       (adapt-document-id  {:id-key :my-id)<br>                                                                       (adapt-document     {:parse-id? true :unkeywordize-keys? true :unkeywordize-values? true)<br>                                                                       (check-document     {:check-ns? true)))]<br>     (-&gt; result (normalize-document    {:keywordize-keys? true :keywordize-values? true :unparse-id? true})<br>                (normalize-document-id {:id-key :my-id})))])<br>=&gt;<br>{:my-namespace/my-id "MyObjectId" :my-namespace/my-key "My value" ...}</pre></div></div></div></div></div><div class="sections"><div class="section" id="result-acknowledged_"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">result-acknowledged?</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd374e2f9-5d0b-4504-9f3a-cab8be49b44c"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd374e2f9-5d0b-4504-9f3a-cab8be49b44c&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn result-acknowledged?
  ([result]
   (result-acknowledged? result {}))

  ([result {:keys [e]}]
   (boolean (if e (if (-&gt; result some?) (or (monger.result/acknowledged? result)
                                            (throw (ex-info e {:result result})))
                                        (or (throw (ex-info e {:result result}))))
                  (if (-&gt; result some?)     (monger.result/acknowledged? result))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3b0861dc-735b-498e-a6de-04fd26c61d52"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Returns TRUE if the given result corresponds to a successful action,<br>otherwise throws an error (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q737601ea-44f5-4bd8-84ff-9331cbf0ca33"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(let [result (monger.collection/update ...)]<br>     (result-acknowledged? result {:e "Something happened!"}))<br>=&gt;<br>true</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q5c925d25-112c-4433-a40d-c8140ccb5a31"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">com.mongodb.WriteResult object</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">result</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa9b558fc-8fa6-4b5d-b71d-bb6c7bc701e6"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa9b558fc-8fa6-4b5d-b71d-bb6c7bc701e6&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q549e8c77-da51-47ba-8674-125446ff6cc2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">boolean</pre></div></div></div></div><div class="section" id="results-acknowledged_"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">results-acknowledged?</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa41acb53-5dda-41ac-bc7f-a781999dc4fd"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa41acb53-5dda-41ac-bc7f-a781999dc4fd&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn results-acknowledged?
  ([results]
   (results-acknowledged? results {}))

  ([results options]
   (letfn [(f0 [%] (result-acknowledged? % options))]
          (-&gt; results (vector/-&gt;items f0)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qac8f2497-cbfa-4be2-8832-a4e375f91dc8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'result-acknowledged?' function on the given results.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q35d37518-5a64-4526-a5c7-3bc8c4f69706"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(let [result (monger.collection/update ...)]<br>     (results-acknowledged? [result] {:e "Something happened!"}))<br>=&gt;<br>[true]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9a979df1-4a1c-47f7-b303-6cc9afbb98bf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">com.mongodb.WriteResult objects in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">results</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q518f6010-f9cf-4cb7-8a01-fb00230c6e01"><button class="snippet--header" onClick="toggleCollapsible(&apos;q518f6010-f9cf-4cb7-8a01-fb00230c6e01&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4d6e6ffc-340b-45d0-9838-505f5b01c24f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">booleans in vector</pre></div></div></div></div><div class="section" id="updated-existing_"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">updated-existing?</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qcdb59759-9d82-46ea-82b5-2a3885b910a2"><button class="snippet--header" onClick="toggleCollapsible(&apos;qcdb59759-9d82-46ea-82b5-2a3885b910a2&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn updated-existing?
  ([result]
   (updated-existing? result {}))

  ([result {:keys [e]}]
   (boolean (if e (if (-&gt; result some?) (or (monger.result/updated-existing? result)
                                            (throw (ex-info e {:result result})))
                                        (or (throw (ex-info e {:result result}))))
                  (if (-&gt; result some?)     (monger.result/updated-existing? result))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q64832e60-5a07-4706-bdc2-450ed8335d2a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Returns TRUE if the given result corresponds to a successful update action,<br>otherwise throws an error (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qbcf32b43-ba73-4c3e-96be-20ffbf2be192"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(let [result (monger.collection/update ...)]<br>     (updated-existing? result {:e "Something happened!"}))<br>=&gt;<br>true</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q86f4d60d-377b-4d3b-8bdf-4b01609e48b1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">com.mongodb.WriteResult object</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">result</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q52066c32-554f-447d-9e3e-31ea3b98d974"><button class="snippet--header" onClick="toggleCollapsible(&apos;q52066c32-554f-447d-9e3e-31ea3b98d974&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q53798e69-8e29-4fc0-9428-5c70b5465c65"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">boolean</pre></div></div></div></div><div class="section" id="updated-existings_"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">updated-existings?</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6fa30a34-ba4f-4234-a166-aa4084192783"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6fa30a34-ba4f-4234-a166-aa4084192783&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn updated-existings?
  ([results]
   (updated-existings? results {}))

  ([results options]
   (letfn [(f0 [%] (updated-existing? % options))]
          (-&gt; results (vector/-&gt;items f0)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3328ec41-8eb2-413a-8022-c3c3266c1b8b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'updated-existing?' function on the given results.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8283048b-9d46-49a1-ac92-167991369f33"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(let [result (monger.collection/update ...)]<br>     (updated-existings? [result] {:e "Something happened!"}))<br>=&gt;<br>[true]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q3dbd0fb8-0e01-49da-9847-c633e8ef74d2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">com.mongodb.WriteResult objects in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">result</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q521987dc-aea4-45a1-be3e-0b8c2e7c3559"><button class="snippet--header" onClick="toggleCollapsible(&apos;q521987dc-aea4-45a1-be3e-0b8c2e7c3559&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q0a6ead28-abaa-42b2-88ee-c2cfb79d3078"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">booleans in vector</pre></div></div></div></div><div class="section" id="adapt-database-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-database-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8603c039-e56d-471d-9f97-faf7478825bc"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8603c039-e56d-471d-9f97-faf7478825bc&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-database-name
  [database-name]
  (if (-&gt; database-name some?)
      (-&gt; database-name name)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q86c7fd60-2387-463d-8a24-5ee3ee98deeb"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given database name into a string (MongoDB compatible).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb245d267-7b08-4b99-aac1-55c737291ba9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-database-name :my-database)<br>=&gt;<br>"my-database"</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q5698b26f-d764-4d35-b1d1-d5b2711f833f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q7f79e39e-88f4-4f09-a844-2c89fc084dea"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre></div></div></div></div><div class="section" id="adapt-databases-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-databases-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1cef5955-374c-49bd-8fe3-942a31ca863d"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1cef5955-374c-49bd-8fe3-942a31ca863d&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-databases-name
  [database-names]
  (if (-&gt; database-names some?)
      (-&gt; database-names (vector/-&gt;items adapt-database-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa297300c-1f66-4c9d-b92a-278b43c81c64"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-database-name' function on the given database names.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb2676936-94fb-47d4-9766-dead5750af64"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-databases-name [:my-database :another-database])<br>=&gt;<br>["my-database" "another-database"]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q152f3373-222d-42f9-8d7f-5974115bb20b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q2df2b4c5-64e5-413c-bd7f-2b92b8493c62"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre></div></div></div></div><div class="section" id="adapt-collection-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-collection-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6d9b3672-81db-403c-91b6-3a9d1243e978"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6d9b3672-81db-403c-91b6-3a9d1243e978&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-collection-name
  [collection-name]
  (if (-&gt; collection-name some?)
      (-&gt; collection-name name syntax/to-snake_case)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaa54c113-1fed-4951-be29-7d38b2419099"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given collection name into a string in snake_case form (MongoDB compatible).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q09b90967-b6c2-4bbb-8d31-c890e8fb7596"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-collection-name :my-collection)<br>=&gt;<br>"my_collection"</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q7f65dc5a-0a4a-4a15-85f5-4d71cb755b38"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qcf7a83d0-e8d6-4364-94f7-cf7d426e6838"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre></div></div></div></div><div class="section" id="adapt-collections-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-collections-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd4925281-b961-496d-a610-0a073110536f"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd4925281-b961-496d-a610-0a073110536f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-collections-name
  [collection-names]
  (if (-&gt; collection-names some?)
      (-&gt; collection-names (vector/-&gt;items adapt-collection-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaec98918-c161-4b6e-9017-fad377a55d75"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-collection-name' function on the given collection names.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q60985d7e-44b5-424c-9e65-6a358b0349df"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-collections-name [:my-collection :another-collection])<br>=&gt;<br>["my_collection" "another_collection"]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q314ec114-9332-45b4-ad02-55f8303f2a5f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q128ea14a-6cfb-4785-b0ca-13c7c1669dbd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre></div></div></div></div><div class="section" id="adapt-collection-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-collection-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q4554deb3-7b81-4224-ba07-2cece9ca4f25"><button class="snippet--header" onClick="toggleCollapsible(&apos;q4554deb3-7b81-4224-ba07-2cece9ca4f25&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-collection-namespace
  [collection-namespace]
  (if (-&gt; collection-namespace some?)
      (-&gt; collection-namespace name)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb15813ab-4c58-45e5-ade6-aa875837e2ef"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given collection namespace into a string (MongoDB compatible).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q6335fe0c-605e-4e1b-9cfd-42ab2df7a26a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-collection-namespace :my-namespace)<br>=&gt;<br>"my-namespace"</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qbbab1854-b5d6-4d67-bd5d-b3de27010ea9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespace</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc9f250a2-4344-422a-899b-dcdd06bb6167"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre></div></div></div></div><div class="section" id="adapt-collections-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-collections-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q380fab6c-def6-4a4b-8052-dbf0c3a0de11"><button class="snippet--header" onClick="toggleCollapsible(&apos;q380fab6c-def6-4a4b-8052-dbf0c3a0de11&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-collections-namespace
  [collection-namespaces]
  (if (-&gt; collection-namespaces some?)
      (-&gt; collection-namespaces (vector/-&gt;items adapt-collection-namespace))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe50f3278-81b6-4626-9a94-5400d9205d8c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-collection-namespace' function on the given collection namespaces.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qca78002a-d6a8-4d7d-b422-9efe74d742b1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-collections-namespace [:my-namespace :another-namespace])<br>=&gt;<br>["my-namespace" "another-namespace"]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q3351e7c9-90f2-45c1-9a47-6e65ebae5b4d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespaces</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q8ab24f3b-1ee4-4bee-9ef9-1ce2b3604bfd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre></div></div></div></div><div class="section" id="adapt-locale"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-locale</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q35c54a71-3ef3-4299-8564-e640cf6adb5e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q35c54a71-3ef3-4299-8564-e640cf6adb5e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-locale
  [locale]
  (if (-&gt; locale some?)
      (-&gt; locale name)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q49e4b6b0-1adc-4460-a812-8abd06350c91"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given locale into a string (MongoDB compatible).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q1813cf0b-28d7-4152-a97f-9f5c52a8c47e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-locale :my-locale)<br>=&gt;<br>"my-locale"</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qac2bb796-f8e4-4ac5-ae1e-a8ba7640e2e4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locale</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q1dacfea3-f6a9-4a7c-be49-4280b9ee39a9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre></div></div></div></div><div class="section" id="adapt-locales"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-locales</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qaee786f7-286e-40a7-a6c8-303fe209939a"><button class="snippet--header" onClick="toggleCollapsible(&apos;qaee786f7-286e-40a7-a6c8-303fe209939a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-locales
  [locales]
  (if (-&gt; locales some?)
      (-&gt; locales (vector/-&gt;items adapt-locale))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qdc30055e-8853-4dba-894c-4c568c58e2fb"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-locale' function on the given locales.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3465436b-1958-4900-b2ac-8bb0a0504025"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-locales [:my-locale :another-locale])<br>=&gt;<br>["my-locale" "another-locale"]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa9a5b6ee-6fa2-4e7e-bf6a-7a04bb6f8354"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locales</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q76d35340-759e-4636-8fae-79a66a316b5d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre></div></div></div></div><div class="section" id="parse-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">parse-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd1e4ab0c-9d70-4fde-aa75-e85ae6d41865"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd1e4ab0c-9d70-4fde-aa75-e85ae6d41865&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn parse-id
  [id]
  (if (-&gt; id some?)
      (if (-&gt; id string?)
          (-&gt; id ObjectId.)
          (-&gt; id))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q013c6d1d-598f-4972-a0cc-b59a191d0236"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Parses the given ObjectId string into an object.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q477164f9-76ad-432c-b5c1-1b6dbb629c5e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(parse-id "MyObjectId")<br>=&gt;<br>#&lt;ObjectId MyObjectId&gt;</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q83ac744a-2c0b-4ff1-b3ba-012ebec8871c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">id</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q47001cfc-8afb-44d2-860d-a999494fb501"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">org.bson.types.ObjectId object</pre></div></div></div></div><div class="section" id="parse-ids"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">parse-ids</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q523efc83-c272-4f6c-a114-816f61673852"><button class="snippet--header" onClick="toggleCollapsible(&apos;q523efc83-c272-4f6c-a114-816f61673852&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn parse-ids
  [ids]
  (if (-&gt; ids some?)
      (-&gt; ids (vector/-&gt;items parse-id))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb3615d88-c5cb-400e-b8c0-4ae5e96981bf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'parse-id' function on the given ObjectId strings.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe91fe97c-9aac-4c0f-ad15-6e7e65e43d94"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(parse-ids ["MyObjectId" "AnotherObjectId"])<br>=&gt;<br>[#&lt;ObjectId MyObjectId&gt; #&lt;ObjectId AnotherObjectId&gt;]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9e8efc6f-79ab-4c7b-a635-ca937272d5d8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">ids</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q7b45d40e-f5d0-46db-90c6-7e5b6dfbea76"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">org.bson.types.ObjectId objects in vector</pre></div></div></div></div><div class="section" id="adapt-document-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-document-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qf8d155c9-39c9-4d1e-80de-6ad96153341b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qf8d155c9-39c9-4d1e-80de-6ad96153341b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-document-id
  ([document]
   (adapt-document-id document {}))

  ([document {:keys [id-key]}]
   (if (-&gt; document some?)
       (if id-key (-&gt; document (map/move-some (map/specify-key document id-key) :_id))
                  (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5ddf0449-8eea-4088-9e24-b4ac620dc565"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Renames the given ID key to ':_id' (MongoDB compatible) within the given document (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa554218a-77ff-4f79-9387-db89a40ba2a5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-document-id {:my-namespace/my-id "MyObjectId" ...}<br>                   {:id-key :my-id})<br>=&gt;<br>{:_id "MyObjectId" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q08240d61-0796-4065-9dcb-ae5d6c89870e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7ec7af72-0fd7-46f5-b65f-e1f39110e034"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7ec7af72-0fd7-46f5-b65f-e1f39110e034&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q08c6f554-2a8a-49ba-aafb-725f080f8dbc"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-documents-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-documents-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q4a69f559-ea24-4f55-8259-a852c9dad772"><button class="snippet--header" onClick="toggleCollapsible(&apos;q4a69f559-ea24-4f55-8259-a852c9dad772&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-documents-id
  ([documents]
   (adapt-documents-id documents {}))

  ([documents options]
   (letfn [(f0 [%] (adapt-document-id % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb173cdbd-4083-4566-ad57-c7b72c040fb6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-document-id' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4afe6f67-819a-45f0-ac15-3dc24e8d730d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-documents-id [{:my-namespace/my-id "MyObjectId" ...}]<br>                    {:id-key :my-id})<br>=&gt;<br>[{:_id "MyObjectId" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qab8f3cd4-2156-495f-bc1b-ffc95ac6cb90"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa9ea3d65-43f9-48fc-bebc-bb814b349f89"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa9ea3d65-43f9-48fc-bebc-bb814b349f89&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa40cdca0-caf0-4fdf-a846-53c895539327"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qcb4256b7-78e3-49ac-ad87-37e8ad715675"><button class="snippet--header" onClick="toggleCollapsible(&apos;qcb4256b7-78e3-49ac-ad87-37e8ad715675&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-document
  ([document]
   (adapt-document document {}))

  ([document {:keys [parse-id? parse-timestamps? undot-keys? unkeywordize-keys? unkeywordize-values?]}]
   (if (-&gt;     document some?)
       (cond-&gt; document parse-id?            (map/update-some :_id parse-id)
                        parse-timestamps?    (time/parse-timestamps)
                        undot-keys?          (bson/undot-keys)
                        unkeywordize-keys?   (json/unkeywordize-keys)
                        unkeywordize-values? (json/unkeywordize-values)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qfafb9d84-93f6-40af-970d-a5fe893194d2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">1. Optionally parses the document ID string into an object within the given document.<br>2. Optionally parses date and time strings into objects within the given document.<br>3. Optionally removes '.' characters from keys within the given document to prevent them misread as dot notations.<br>4. Optionally converts keyword type keys and/or values into strings within the given document.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qcc1f60a0-92b9-4311-82c9-bf6dd7c06b18"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-document {:_id                       "MyObjectId"<br>                 :my-namespace/my-keyword   :my-value<br>                 :my-namespace/my-string    "My value"<br>                 :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z" ...}<br>                {:parse-id? true :parse-timestamps? true :unkeywordize-keys? true :unkeywordize-values? true})<br>=&gt;<br>{"_id"                       #&lt;ObjectId MyObjectId&gt;<br> "my-namespace/my-keyword"   "*:my-value"<br> "my-namespace/my-string"    "My value"<br> "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt; ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6e0f2ff4-e667-4699-8de9-c1633da48a3c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qeabd93b3-f9e0-4a4a-b996-f57869a6d8ff"><button class="snippet--header" onClick="toggleCollapsible(&apos;qeabd93b3-f9e0-4a4a-b996-f57869a6d8ff&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6faacb4c-1793-40b1-b670-24e8665f6b88"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q517f4f62-8eeb-40da-a09b-c3edc2916322"><button class="snippet--header" onClick="toggleCollapsible(&apos;q517f4f62-8eeb-40da-a09b-c3edc2916322&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-documents
  ([documents]
   (adapt-documents documents {}))

  ([documents options]
   (letfn [(f0 [%] (adapt-document % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf5abf14a-1ec4-4d3d-a732-a3421a02b60a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-document' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3ec4d83b-f2e4-4aad-9582-9d1fe852eecf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-documents [{:_id                       "MyObjectId"<br>                   :my-namespace/my-keyword   :my-value<br>                   :my-namespace/my-string    "My value"<br>                   :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z" ...}]<br>                 {:parse-id? true :parse-timestamps? true :unkeywordize-keys? true :unkeywordize-values? true})<br>=&gt;<br>[{"_id"                       #&lt;ObjectId MyObjectId&gt;<br>  "my-namespace/my-keyword"   "*:my-value"<br>  "my-namespace/my-string"    "My value"<br>  "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt; ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6eed7596-3cc6-4409-a6a3-01ba583dc0ff"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q75e5505e-3912-46b7-a104-e77196cd5c6d"><button class="snippet--header" onClick="toggleCollapsible(&apos;q75e5505e-3912-46b7-a104-e77196cd5c6d&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q86070633-28e6-4999-b7a8-d6f3de3f8b57"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-projection-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-projection-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd3592356-8274-41ad-93f5-a37a690d3438"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd3592356-8274-41ad-93f5-a37a690d3438&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-projection-id
  ([projection]
   (adapt-projection-id projection {}))

  ([projection {:keys [id-key]}]
   (if (-&gt; projection some?)
       (if id-key (-&gt; projection (map/move-some (map/specify-key projection id-key) :_id))
                  (-&gt; projection)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q0b2e33c4-83c5-4c94-924d-963dec4b84be"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Renames the given ID key to ':_id' (MongoDB compatible) within the given projection (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qfb1766c9-612a-4785-acb5-129a48a6c74f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-projection-id {:my-namespace/my-id -1 ...}<br>                     {:id-key :my-id})<br>=&gt;<br>{:_id -1 ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6886b013-adc1-4483-aa53-5e9ad14cc2b2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q35570bc8-3626-4da6-8005-0d79814764fc"><button class="snippet--header" onClick="toggleCollapsible(&apos;q35570bc8-3626-4da6-8005-0d79814764fc&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q1f262f6c-9ef4-4e69-945e-2d249b97cc05"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-projections-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-projections-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qc5ca86fb-c5d1-4833-897b-7998d746201a"><button class="snippet--header" onClick="toggleCollapsible(&apos;qc5ca86fb-c5d1-4833-897b-7998d746201a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-projections-id
  ([projections]
   (adapt-projections-id projections {}))

  ([projections options]
   (letfn [(f0 [%] (adapt-projection-id % options))]
          (if (-&gt; projections some?)
              (-&gt; projections (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q03ef4513-8706-46fe-976a-364f6ab9b031"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-projection-id' function on the given projections.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe2ee7f20-5bdf-475b-ac08-4d14ebde0d1f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-projections-id [{:my-namespace/my-id -1 ...}]<br>                      {:id-key :my-id})<br>=&gt;<br>[{:_id -1 ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qf6f2eae5-287d-4c3f-a436-0c84bc037c42"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projections</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q4f85849f-1d02-47ba-bc36-eca68d574290"><button class="snippet--header" onClick="toggleCollapsible(&apos;q4f85849f-1d02-47ba-bc36-eca68d574290&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q039660f5-ec5c-4e7d-bb6d-dddfd4ca4e5b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-projection"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-projection</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qdafa2d00-c164-4f26-ae01-440d8b3b53c5"><button class="snippet--header" onClick="toggleCollapsible(&apos;qdafa2d00-c164-4f26-ae01-440d8b3b53c5&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-projection
  ([projection]
   (adapt-projection projection {}))

  ([projection {:keys [undot-keys? unkeywordize-keys?]}]
   (if (-&gt;     projection some?)
       (cond-&gt; projection undot-keys?        (bson/undot-keys)
                          unkeywordize-keys? (json/unkeywordize-keys)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q595f6c7e-80f2-402d-8608-8ec5200a6043"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">1. Optionally removes '.' characters from keys within the given projection to prevent them misread as dot notations.<br>2. Optionally converts keyword type keys into strings within the given projection.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q693936fc-d4d0-4efe-bb4d-e565f5fee5d0"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-projection {:_id                 -1<br>                   :my-namespace/my-key -1 ...}<br>                  {:unkeywordize-keys? true})<br>=&gt;<br>{"_id"                 -1<br> "my-namespace/my-key" -1 ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q87171d9e-e22e-41ee-8539-b4384a6a2a89"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6de72ad0-f83f-4b66-837e-dd67dfc216e0"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6de72ad0-f83f-4b66-837e-dd67dfc216e0&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q47959c1d-9ae7-4bb1-8746-5733792dda56"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-projections"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-projections</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qc0725e87-1c3d-409c-b562-eee2b3bfda8b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qc0725e87-1c3d-409c-b562-eee2b3bfda8b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-projections
  ([projections]
   (adapt-projections projections {}))

  ([projections options]
   (letfn [(f0 [%] (adapt-projection % options))]
          (if (-&gt; projections some?)
              (-&gt; projections (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaa4ec8b8-f4d0-4a43-88b3-9a1339765a2e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-projection' function on the given projections.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf8f8ac75-5999-41c5-b240-49ba7f55df1d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-projections [{:_id                 -1<br>                     :my-namespace/my-key -1 ...}]<br>                  {:unkeywordize-keys? true})<br>=&gt;<br>[{"_id"                 -1<br>  "my-namespace/my-key" -1 ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q1c0a56b4-33a8-4d20-8c8b-dbdd3ccd95fe"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projections</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qbc3ee791-afdc-4edf-b207-9277b5b112a6"><button class="snippet--header" onClick="toggleCollapsible(&apos;qbc3ee791-afdc-4edf-b207-9277b5b112a6&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q3daf0f5a-82cf-48d7-a05d-1c44b24d1103"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-query-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-query-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q72cb570c-9cc6-472b-a4cc-9e574df2ce27"><button class="snippet--header" onClick="toggleCollapsible(&apos;q72cb570c-9cc6-472b-a4cc-9e574df2ce27&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-query-id
  ([query]
   (adapt-query-id query {}))

  ([query {:keys [id-key]}]
   (letfn [(f0 [%] (adapt-document-id % {:id-key id-key}))]
          (if (-&gt; query some?)
              (if id-key (-&gt; query (map/-&gt;&gt;values-by map? f0 {:on-self? true}))
                         (-&gt; query))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5f5dacb5-69b2-4a20-86b8-b5bbc852cfb9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Renames the given ID key to ':_id' (MongoDB compatible) within the given query (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qafb469ed-ee6a-45e9-ad8d-350d5be4f614"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given query!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q9e25ece6-20e4-4f47-a4c4-96631cb887e0"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-query-id {:my-namespace/my-id "MyObjectId" :$or [{:my-namespace/my-id "AnotherObjectId" ...}] ...}<br>                {:id-key :my-id})<br>=&gt;<br>{:_id "MyObjectId" :$or [{:_id "AnotherObjectId" ...}] ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa7d38024-7174-41d5-ac36-506a2788f3dd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">query</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qeb566f42-89e2-46a9-94ae-223fb474d5ac"><button class="snippet--header" onClick="toggleCollapsible(&apos;qeb566f42-89e2-46a9-94ae-223fb474d5ac&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qf2bf9b25-74f5-4b65-bf46-337d51370637"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-queries-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-queries-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qbd9e98e9-f77b-4d45-8d20-f313ff26874a"><button class="snippet--header" onClick="toggleCollapsible(&apos;qbd9e98e9-f77b-4d45-8d20-f313ff26874a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-queries-id
  ([queries]
   (adapt-queries-id queries {}))

  ([queries options]
   (letfn [(f0 [%] (adapt-query-id % options))]
          (if (-&gt; queries some?)
              (-&gt; queries (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4cb366fb-ba5b-4578-b708-efcba114522d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-query-id' function on the given queries.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5abfc76b-7658-4914-87d9-18b68197538b"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given queries!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2500821b-5e90-487c-9451-f88c32396df4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-queries-id [{:my-namespace/my-id "MyObjectId" :$or [{:my-namespace/my-id "AnotherObjectId" ...}] ...}]<br>                  {:id-key :my-id})<br>=&gt;<br>[{:_id "MyObjectId" :$or [{:_id "AnotherObjectId" ...}] ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qffab5560-5232-4707-a698-26001014062d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">queries</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q0ad08a31-a498-41fe-80cc-031b6ff48986"><button class="snippet--header" onClick="toggleCollapsible(&apos;q0ad08a31-a498-41fe-80cc-031b6ff48986&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q95dc8d6e-6a3a-477b-b463-8a804dfa42a5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-query"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-query</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q849ce5fb-a9de-4b9a-bee8-63ec46a615ec"><button class="snippet--header" onClick="toggleCollapsible(&apos;q849ce5fb-a9de-4b9a-bee8-63ec46a615ec&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-query
  ([query]
   (adapt-query query {}))

  ([query {:keys [parse-id? parse-timestamps? undot-keys? unkeywordize-keys? unkeywordize-values?]}]
   (letfn [(f0 [%] (adapt-document % {:parse-id? parse-id?}))]
          (if (-&gt;     query some?)
              (cond-&gt; query parse-id?            (map/-&gt;&gt;values-by map? f0 {:on-self? true})
                            parse-timestamps?    (time/parse-timestamps)
                            undot-keys?          (bson/undot-keys)
                            unkeywordize-keys?   (json/unkeywordize-keys)
                            unkeywordize-values? (json/unkeywordize-values))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5ecd3b0c-fc6f-46d4-b85a-90ed293d42c1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">1. Optionally parses document ID strings into objects within the given query.<br>2. Optionally parses date and time strings into objects within the given query.<br>3. Optionally removes '.' characters from keys within the given query to prevent them misread as dot notations.<br>4. Optionally converts keyword type keys and values into strings within the given query.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q9e2285b8-af13-42b5-921c-977578f96b24"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given query!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q0032ebd6-ecdb-4ca8-8c5a-c81c02498b29"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-query {:_id                       "MyObjectId"<br>              :my-namespace/my-keyword   :my-value<br>              :my-namespace/my-string    "My value"<br>              :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z"<br>              :$or                       [{:_id "AnotherObjectId" ...}] ...}<br>             {:parse-id? true :parse-timestamps? true :unkeywordize-keys? true :unkeywordize-values? true})<br>=&gt;<br>{"_id"                       #&lt;ObjectId MyObjectId&gt;<br> "my-namespace/my-keyword"   "*:my-value"<br> "my-namespace/my-string"    "My value"<br> "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt;<br> "$or"                       [{"_id" #&lt;ObjectId AnotherObjectId&gt; ...}] ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qe28436f0-c475-4179-8798-d6e2aa38e289"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">query</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q287d194f-bc29-4074-b16e-c1f95a1dbc14"><button class="snippet--header" onClick="toggleCollapsible(&apos;q287d194f-bc29-4074-b16e-c1f95a1dbc14&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9b33f3aa-b2a4-44bc-ae04-a2a8b1c7be41"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-queries"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-queries</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q11b244b6-c011-4c21-b329-9b06f65db6af"><button class="snippet--header" onClick="toggleCollapsible(&apos;q11b244b6-c011-4c21-b329-9b06f65db6af&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-queries
  ([queries]
   (adapt-queries queries {}))

  ([queries options]
   (letfn [(f0 [%] (adapt-query % options))]
          (if (-&gt; queries some?)
              (-&gt; queries (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q26c17676-5ea5-45e3-800d-c5b612a90ec4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-query' function on the given queries.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q1b0b3e70-e633-473f-a342-922bf2baaac5"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given queries!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q52d60368-b390-4bc4-b517-6ec984a7ba08"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-queries [{:_id                       "MyObjectId"<br>                 :my-namespace/my-keyword   :my-value<br>                 :my-namespace/my-string    "My value"<br>                 :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z"<br>                 :$or                       [{:_id "AnotherObjectId"}] ...}]<br>               {:parse-id? true :parse-timestamps? true :unkeywordize-keys? true :unkeywordize-values? true})<br>=&gt;<br>[{"_id"                       #&lt;ObjectId MyObjectId&gt;<br>  "my-namespace/my-keyword"   "*:my-value"<br>  "my-namespace/my-string"    "My value"<br>  "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt;<br>  "$or"                       [{"_id" #&lt;ObjectId AnotherObjectId&gt;}] ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q07de77bb-65a5-4255-ba27-8cd65d4a59c6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">queries</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8b99182d-1e59-43d0-a17b-ce2a7f500fdd"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8b99182d-1e59-43d0-a17b-ce2a7f500fdd&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb3268477-f6e7-4b9b-bb0b-c486cac611a2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-pipeline-stage-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-pipeline-stage-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qb30a94d3-8e8d-4529-bf06-7d2f6ab26f5e"><button class="snippet--header" onClick="toggleCollapsible(&apos;qb30a94d3-8e8d-4529-bf06-7d2f6ab26f5e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-pipeline-stage-id
  ([pipeline-stage]
   (adapt-pipeline-stage-id pipeline-stage {}))

  ([pipeline-stage {:keys [id-key]}]
   (letfn [(f0 [%] (adapt-document-id % {:id-key id-key}))]
          (if (-&gt; pipeline-stage some?)
              (if id-key (-&gt; pipeline-stage (map/-&gt;&gt;values-by map? f0 {:on-self? true}))
                         (-&gt; pipeline-stage))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5323d231-9333-4f46-9ee3-51a9aa160b96"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Renames the given ID key to ':_id' (MongoDB compatible) within the given pipeline stage (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q6095c320-8183-4982-bcea-005cb8bb8582"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given pipeline stage!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q99ecaa11-0c55-4a55-bac2-51068ae2f6a5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-pipeline-stage-id {:$match {:my-namespace/my-id "MyObjectId"}}<br>                         {:id-key :my-id})<br>=&gt;<br>{:$match {:_id "MyObjectId"}}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qdc62294d-c25f-4015-bfaa-cd93f52fea5a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stage</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qee562bff-3c3b-4c44-8132-d1c0dea84f98"><button class="snippet--header" onClick="toggleCollapsible(&apos;qee562bff-3c3b-4c44-8132-d1c0dea84f98&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb0e886b8-ff57-4ab4-83e4-135f02fa4169"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-pipeline-stages-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-pipeline-stages-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qdf6e4582-b31e-42fb-bf69-2464936db872"><button class="snippet--header" onClick="toggleCollapsible(&apos;qdf6e4582-b31e-42fb-bf69-2464936db872&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-pipeline-stages-id
  ([pipeline-stages]
   (adapt-pipeline-stages-id pipeline-stages {}))

  ([pipeline-stages options]
   (letfn [(f0 [%] (adapt-pipeline-stage-id % options))]
          (if (-&gt; pipeline-stages some?)
              (-&gt; pipeline-stages (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc3785f88-6551-408e-82d5-ac1bf4094b88"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-pipeline-stage-id' function on the given pipeline stages.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8a2914e4-b97c-48c3-b768-9c464081c673"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given pipeline stages!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5f5c44ab-b15e-451e-a0f9-5351f7799128"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-pipeline-stages-id [{:$match {:my-namespace/my-id "MyObjectId"}}<br>                           {:$sort  {:my-namespace/my-id -1}}]<br>                         {:id-key :my-id})<br>=&gt;<br>[{:$match {:my-namespace/my-id "MyObjectId"}}<br> {:$sort  {:my-namespace/my-id -1}}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4fc62fdb-4ea9-4230-95a3-ef502d5148ab"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stages</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qbc035ab3-fd93-422c-82b8-f22e79db7159"><button class="snippet--header" onClick="toggleCollapsible(&apos;qbc035ab3-fd93-422c-82b8-f22e79db7159&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q29183507-46fa-4275-809e-e282db0f605b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="adapt-pipeline-stage"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-pipeline-stage</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q05e93b40-ae3b-4792-b832-90260243bff0"><button class="snippet--header" onClick="toggleCollapsible(&apos;q05e93b40-ae3b-4792-b832-90260243bff0&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-pipeline-stage
  ([pipeline-stage]
   (adapt-pipeline-stage pipeline-stage {}))

  ([pipeline-stage {:keys [parse-id? parse-timestamps? undot-keys? unkeywordize-keys? unkeywordize-values?]}]
   (letfn [(f0 [%] (println %) (adapt-document % {:parse-id? parse-id?}))]
          (if (-&gt;     pipeline-stage some?)
              (cond-&gt; pipeline-stage parse-id?            (map/-&gt;&gt;values-by map? f0 {:on-self? true})
                                     parse-timestamps?    (time/parse-timestamps)
                                     undot-keys?          (bson/undot-keys)
                                     unkeywordize-keys?   (map/-&gt;&gt;values-by keyword? json/unkeywordize-key)
                                     unkeywordize-keys?   (json/unkeywordize-keys)
                                     unkeywordize-values? (json/unkeywordize-values))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2f82569b-4e94-4f3c-85ca-f61189e69129"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">1. Optionally parses document ID strings into objects within the given pipeline stage.<br>2. Optionally parses date and time strings into objects within the given pipeline stage.<br>3. Optionally removes '.' characters from keys within the given pipeline stage to prevent them misread as dot notations.<br>4. Optionally converts keyword type keys and values into strings within the given pipeline stage.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qfaf10849-99bf-40d8-adb0-769fa5a77359"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given pipeline stage!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q68bf80f4-a9ee-42fd-a215-81cb96e48bb4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-pipeline-stage {:$unset [:my-namespace/my-key]}<br>                      {:unkeywordize-keys? true}<br>=&gt;<br>{"$unset" ["my-namespace/my-key"]}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qefdfd569-df17-4d8f-bbcb-f0502da11d6e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stage</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qb790aaa6-d3bd-4863-971a-9865c24c8b4b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qb790aaa6-d3bd-4863-971a-9865c24c8b4b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qdd4b9cf8-53f4-49ff-b253-4d7e2d2030fd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="adapt-pipeline-stages"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">adapt-pipeline-stages</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q232c04dd-9b99-4734-98c1-ca4b42ecea9e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q232c04dd-9b99-4734-98c1-ca4b42ecea9e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn adapt-pipeline-stages
  ([pipeline-stages]
   (adapt-pipeline-stages pipeline-stages {}))

  ([pipeline-stages options]
   (letfn [(f0 [%] (adapt-pipeline-stage % options))]
          (if (-&gt; pipeline-stages some?)
              (-&gt; pipeline-stages (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qccf593a3-a5dc-4bcc-b9fa-e4575723a28f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'adapt-pipeline-stage' function on the given pipeline stages.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc1954f08-3e87-46c0-bcd5-31385ef7e655"><div class="snippet--header"><pre class="text--uppercase color--hard-blue text--xxs ">note</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">All changes performed recursivelly on the given pipeline stages!</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc9b358b4-1bb8-49fa-8662-e97eac1c376e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(adapt-pipeline-stages [{:$unset [:my-namespace/my-key]}<br>                        {:$match {:_id "MyObjectId"}}]<br>                       {:parse-id? true :unkeywordize-keys? true}<br>=&gt;<br>[{"$unset" ["my-namespace/my-key"]}<br> {"$match" {"_id" #&lt;ObjectId MyObjectId&gt;}}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q0cd681d9-2a92-4aae-91d1-8afeaaab8767"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stages</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q0d4934ab-61c9-4b9f-91b1-f62f098b2938"><button class="snippet--header" onClick="toggleCollapsible(&apos;q0d4934ab-61c9-4b9f-91b1-f62f098b2938&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:parse-id? (boolean)(opt)<br> :parse-timestamps? (boolean)(opt)<br> :undot-keys? (boolean)(opt)<br> :unkeywordize-keys? (boolean)(opt)<br> :unkeywordize-values? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6e5c182d-ba2b-46f2-976f-b183dd451849"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="apply-document-changes"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">apply-document-changes</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6532ca26-6df9-4ae5-8075-f1b3b87baac6"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6532ca26-6df9-4ae5-8075-f1b3b87baac6&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn apply-document-changes
  ([document]
   (apply-document-changes document {}))

  ([document {:keys [changes]}]
   (if (-&gt; document some?)
       (if changes (-&gt; document (merge changes))
                   (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8299b88f-2cf8-4261-aac8-513887e0bdfa"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Merges the given changes (if any) onto to the given document.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7fcc51e6-d0f1-4818-b6a1-8b04fff1adf6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(apply-document-changes {...}<br>                        {:changes {:my-namespace/my-key "My changes"}})<br>=&gt;<br>{:my-namespace/my-key "My changes" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qca4dc5e7-1fc4-49d4-a5cc-f0cb47cff065"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1a5f956f-c74d-4a01-bb14-105be18caede"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1a5f956f-c74d-4a01-bb14-105be18caede&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:changes (map)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q072383e5-d0f2-49ed-8a15-0993ef4b2780"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="apply-documents-changes"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">apply-documents-changes</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfd945b79-1d4f-488c-8d5b-66baf4eaae2a"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfd945b79-1d4f-488c-8d5b-66baf4eaae2a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn apply-documents-changes
  ([documents]
   (apply-documents-changes documents {}))

  ([documents options]
   (letfn [(f0 [%] (apply-document-changes % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf2621c60-ca4c-4b76-b631-91beac1ec824"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'apply-document-changes' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7b47bdc0-a61f-448b-956b-462773d02a9a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(apply-documents-changes [{...}]<br>                         {:changes {:my-namespace/my-key "My changes"}})<br>=&gt;<br>[{:my-namespace/my-key "My changes" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9ea103ed-df36-4b66-9ae3-eec92dcafd5b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q2c8da7fc-e3fc-4d36-bd3c-4eeb80934f5b"><button class="snippet--header" onClick="toggleCollapsible(&apos;q2c8da7fc-e3fc-4d36-bd3c-4eeb80934f5b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:changes (map)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q12c28fcf-6e2f-4eae-a769-6d03b226a76f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="check-database-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-database-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q78629777-3b8a-459d-a6c5-8743feecebe4"><button class="snippet--header" onClick="toggleCollapsible(&apos;q78629777-3b8a-459d-a6c5-8743feecebe4&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-database-name
  ([database-name]
   (check-database-name database-name {}))

  ([database-name {:keys [check-type?]}]
   (cond (-&gt; database-name keyword? not (and check-type?)) (-&gt; messages/DATABASE-NAME-TYPE-ERROR (ex-info {:database-name database-name}) throw)
         (-&gt; database-name keyword?)                       (-&gt; database-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2984d254-7870-4d96-9c2d-1340b8ed6c83"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given database name if provided as a keyword.<br>- Optionally throws an error if the given database name is not a keyword (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5b6c100d-4de0-49fe-8710-295a1e4d7509"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-database-name :my-database<br>                     {:check-type? true})<br>=&gt;<br>:my-database</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6e7ba20c-0ef4-4f9f-b379-88038062c536"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q5e4c1acb-7442-471d-9265-e80ea698fedf"><button class="snippet--header" onClick="toggleCollapsible(&apos;q5e4c1acb-7442-471d-9265-e80ea698fedf&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q7b535d15-b020-404c-87cd-1fb61bf8d220"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-databases-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-databases-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1472b560-1b48-4d20-9227-ed74c1c6fa3f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1472b560-1b48-4d20-9227-ed74c1c6fa3f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-databases-name
  ([database-names]
   (check-databases-name database-names {}))

  ([database-names {:keys [e] :as options}]
   (letfn [(f0 [%] (check-database-name % options))]
          (cond (-&gt; database-names vector/not-empty?) (-&gt; database-names (vector/-&gt;items f0))
                (-&gt; e some?)                          (-&gt; e (ex-info {:database-names database-names}) throw)
                :return database-names))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7b109a32-ac63-412c-99b6-1885bc812fa6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-database-name' function on the given database names.<br>- Options (excluding ':e') are passed to the 'check-database-name' function.<br>- Optionally throws an error if no database name is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4091b3f1-88a3-4a19-a938-5e37b965f709"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-databases-name [:my-database :another-database]<br>                      {:check-type? true})<br>=&gt;<br>[:my-database :another-database]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q288d3867-f0f6-4bb5-8d68-b66306d3e4c8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q3b267619-b39c-4375-adf8-31c884c27a4f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q3b267619-b39c-4375-adf8-31c884c27a4f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6b934f78-8a1c-42b3-8f00-03f3ff194ae2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-collection-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-collection-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qf215da14-2312-47db-866b-c53a06b26e43"><button class="snippet--header" onClick="toggleCollapsible(&apos;qf215da14-2312-47db-866b-c53a06b26e43&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-collection-name
  ([collection-name]
   (check-collection-name collection-name {}))

  ([collection-name {:keys [check-type?]}]
   (cond (-&gt; collection-name keyword? not (and check-type?)) (-&gt; messages/COLLECTION-NAME-TYPE-ERROR (ex-info {:collection-name collection-name}) throw)
         (-&gt; collection-name keyword?)                       (-&gt; collection-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q852d0b84-b15c-403e-8260-5b890515857a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given collection name if provided as a keyword.<br>- Optionally throws an error if the given collection name is not a keyword (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc233be42-1a84-40b1-a2e0-6ecce79f87ea"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-collection-name :my-collection<br>                       {:check-type? true})<br>=&gt;<br>:my-collection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q1373f426-717b-412b-8b08-4275dbe186b4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8510ddc8-c454-4a67-b635-a8c4485ef2ef"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8510ddc8-c454-4a67-b635-a8c4485ef2ef&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q79512341-4ab0-46e6-8a02-7404d12c9db8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-collections-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-collections-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1622e4bb-9b18-497f-a9a4-d5dbce9392ad"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1622e4bb-9b18-497f-a9a4-d5dbce9392ad&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-collections-name
  ([collection-names]
   (check-collections-name collection-names {}))

  ([collection-names {:keys [e] :as options}]
   (letfn [(f0 [%] (check-collection-name % options))]
          (cond (-&gt; collection-names vector/not-empty?) (-&gt; collection-names (vector/-&gt;items f0))
                (-&gt; e some?)                            (-&gt; e (ex-info {:collection-names collection-names}) throw)
                :return collection-names))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3efeca67-e6e9-4db6-ac13-a1c1d4103c7b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-collection-name' function on the given collection names.<br>- Options (excluding ':e') are passed to the 'check-collection-name' function.<br>- Optionally throws an error if no collection name is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q55f15681-4112-430a-a0b1-a46229aba29c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-collections-name [:my-collection :another-collection]<br>                        {:check-type? true})<br>=&gt;<br>[:my-collection :another-collection]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q5ad6b463-4498-48af-93f4-da156a5aa6ae"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qbfbafcbd-76b0-4c3d-bd93-5ec899022716"><button class="snippet--header" onClick="toggleCollapsible(&apos;qbfbafcbd-76b0-4c3d-bd93-5ec899022716&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q27220c50-85cb-49a0-8889-281905d9ad86"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-collection-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-collection-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7a8a7f96-55cd-4e0f-87ea-cdc621a79740"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7a8a7f96-55cd-4e0f-87ea-cdc621a79740&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-collection-namespace
  ([collection-namespace]
   (check-collection-namespace collection-namespace {}))

  ([collection-namespace {:keys [check-type?]}]
   (cond (-&gt; collection-namespace keyword? not (and check-type?)) (-&gt; messages/COLLECTION-NAMESPACE-TYPE-ERROR (ex-info {:collection-namespace collection-namespace}) throw)
         (-&gt; collection-namespace keyword?)                       (-&gt; collection-namespace))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qbaf4a6d1-e109-4668-8718-c6aa2094c4fd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given collection namespace if provided as a keyword.<br>- Optionally throws an error if the given collection namespace is not a keyword (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qce030dbc-ce8e-434c-a060-4d6acf7a6d11"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-collection-namespace :my-collection<br>                            {:check-type? true})<br>=&gt;<br>:my-collection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qf7df603d-8248-4097-abd7-b97b50a236f0"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespace</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8b64b2ab-4eb3-42c9-b550-38a892c0c25a"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8b64b2ab-4eb3-42c9-b550-38a892c0c25a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qbc769fb2-6750-4274-a820-24b29246c3bc"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-collections-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-collections-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q12651f5e-a4c4-48b5-8519-d12c6f0d8efd"><button class="snippet--header" onClick="toggleCollapsible(&apos;q12651f5e-a4c4-48b5-8519-d12c6f0d8efd&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-collections-namespace
  ([collection-namespaces]
   (check-collections-namespace collection-namespaces {}))

  ([collection-namespaces {:keys [e] :as options}]
   (letfn [(f0 [%] (check-collection-namespace % options))]
          (cond (-&gt; collection-namespaces vector/not-empty?) (-&gt; collection-namespaces (vector/-&gt;items f0))
                (-&gt; e some?)                                 (-&gt; e (ex-info {:collection-namespaces collection-namespaces}) throw)
                :return collection-namespaces))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa0ca11cd-7d84-4a00-8701-cfb1f6f3422e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-collection-namespace' function on the given collection namespaces.<br>- Options (excluding ':e') are passed to the 'check-collection-namespace' function.<br>- Optionally throws an error if no collection namespace is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8fcfdc8a-c008-432b-93da-31abb400d2a5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-collections-namespace [:my-collection :another-collection]<br>                             {:check-type? true})<br>=&gt;<br>[:my-collection :another-collection]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qe745a398-be49-4b46-a18a-8b0f402984a1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespaces</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7eeb71ca-7641-4f00-9949-88c9f3ebf7f6"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7eeb71ca-7641-4f00-9949-88c9f3ebf7f6&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb9e4ece3-2c7b-494d-a96b-4d37c1ea19bf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-locale"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-locale</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q326f46ef-7406-4a47-bf6a-58ae182b7e2c"><button class="snippet--header" onClick="toggleCollapsible(&apos;q326f46ef-7406-4a47-bf6a-58ae182b7e2c&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-locale
  ([locale]
   (check-locale locale {}))

  ([locale {:keys [check-type?]}]
   (cond (-&gt; locale keyword? not (and check-type?)) (-&gt; messages/LOCALE-TYPE-ERROR (ex-info {:locale locale}) throw)
         (-&gt; locale keyword?)                       (-&gt; locale))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc608d095-2200-41ec-947e-54b61b24e357"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given locale if provided as a keyword.<br>- Optionally throws an error if the given locale is not a keyword (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb2af9883-f4fd-42eb-90ed-53a5ee96269e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-locale :my-locale<br>              {:check-type? true}))<br>=&gt;<br>:my-locale</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc80331eb-8f5f-4440-923c-400c9f9cfc52"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locale</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qeb86b289-a8da-4273-8c98-cbf281af7f37"><button class="snippet--header" onClick="toggleCollapsible(&apos;qeb86b289-a8da-4273-8c98-cbf281af7f37&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9303fe31-ee59-437c-af4f-b6e4cd705652"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-locales"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-locales</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q5eb4ee1e-4f53-4284-8a70-a2d86de72546"><button class="snippet--header" onClick="toggleCollapsible(&apos;q5eb4ee1e-4f53-4284-8a70-a2d86de72546&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-locales
  ([locales]
   (check-locales locales {}))

  ([locales {:keys [e] :as options}]
   (letfn [(f0 [%] (check-locale % options))]
          (cond (-&gt; locales vector/not-empty?) (-&gt; locales (vector/-&gt;items f0))
                (-&gt; e some?)                   (-&gt; e (ex-info {:locales locales}) throw)
                :return locales))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf9c5ebb1-f00d-4bd2-93a7-3578c1fb4363"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-locale' function on the given locales.<br>- Options (excluding ':e') are passed to the 'check-locale' function.<br>- Optionally throws an error if no locale is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qad79c490-dc4e-47de-9aa3-f39985350b31"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-locale [:my-locale :another-locale]<br>              {:check-type? true})<br>=&gt;<br>[:my-locale :another-locale]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4ae6f91a-9ae0-45fa-9d9e-5305e36ea4fd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locales</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q58b78252-bcab-4363-a06d-f997f786853d"><button class="snippet--header" onClick="toggleCollapsible(&apos;q58b78252-bcab-4363-a06d-f997f786853d&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa670eb7b-47a9-4826-9af1-663fb0d5dae5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qdad1de8e-3a87-4eb5-985d-f6922c5e728a"><button class="snippet--header" onClick="toggleCollapsible(&apos;qdad1de8e-3a87-4eb5-985d-f6922c5e728a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-id
  ([id]
   (check-id id {}))

  ([id {:keys [check-type?]}]
   (cond (-&gt; id monger.tools/object-id? not (and check-type?)) (-&gt; messages/ID-TYPE-ERROR (ex-info {:id id}) throw)
         (-&gt; id monger.tools/object-id?)                       (-&gt; id))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa898201f-4872-4492-89a6-341b90ac79b8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given ID if provided as an ObjectId object.<br>- Optionally throws an error if the given ID is not an ObjectId object (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5f08817b-65b0-40e8-ba30-e17dfeb7ecf6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-id #&lt;ObjectId MyObjectId&gt;<br>          {:check-type? true})<br>=&gt;<br>#&lt;ObjectId MyObjectId&gt;</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc9469d79-2bd2-433f-9875-abf6c4caa144"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">id</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qf791d9d9-9a5c-44d0-a030-643995484863"><button class="snippet--header" onClick="toggleCollapsible(&apos;qf791d9d9-9a5c-44d0-a030-643995484863&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q91fc5ff8-f5d0-4206-8dc3-a366d6b6f372"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-ids"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-ids</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qb2aff56f-014d-439a-baf0-d2a7a2823958"><button class="snippet--header" onClick="toggleCollapsible(&apos;qb2aff56f-014d-439a-baf0-d2a7a2823958&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-ids
  ([ids]
   (check-ids ids {}))

  ([ids {:keys [e] :as options}]
   (letfn [(f0 [%] (check-id % options))]
          (cond (-&gt; ids vector/not-empty?) (-&gt; ids (vector/-&gt;items f0))
                (-&gt; e some?)               (-&gt; e (ex-info {:ids ids}) throw)
                :return ids))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q17b26605-4de9-46df-a0fe-d6ec98a6d751"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-id' function on the given IDs.<br>- Options (excluding ':e') are passed to the 'check-id' function.<br>- Optionally throws an error if no ID is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q65b49165-57b0-4667-923f-d8e20bb0a752"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-ids [#&lt;ObjectId MyObjectId&gt;]<br>           {:check-type? true})<br>=&gt;<br>[#&lt;ObjectId MyObjectId&gt;]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb5ad65ff-d0ee-45bd-82e5-58696c01c38f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">ids</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1ab5f087-bc3b-4b68-ac10-03f74fec52a0"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1ab5f087-bc3b-4b68-ac10-03f74fec52a0&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qaaedae61-15b3-4774-8f40-2716e6da0bc4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1290f78f-d817-4a0f-9fff-08cbce9b9dc1"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1290f78f-d817-4a0f-9fff-08cbce9b9dc1&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-document
  ([document]
   (check-document document {}))

  ([document {:keys [check-empty? check-ns? check-type?]}]
   (cond (-&gt; document map/empty?          (and check-empty?)) (-&gt; messages/DOCUMENT-EMPTY-ERROR           (ex-info {:document document}) throw)
         (-&gt; document map/namespaced? not (and check-ns?))    (-&gt; messages/NAMESPACED-DOCUMENT-TYPE-ERROR (ex-info {:document document}) throw)
         (-&gt; document map? not            (and check-type?))  (-&gt; messages/DOCUMENT-TYPE-ERROR            (ex-info {:document document}) throw)
         (-&gt; document map?)                                   (-&gt; document))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4cb5bf1e-d38d-4b72-a413-2b94b3ef84f6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given document if provided as a map.<br>- Optionally throws an error if the given document is an empty map (if ':check-empty?' is TRUE).<br>- Optionally throws an error if the given document is not namespaced (if ':check-ns?' is TRUE).<br>- Optionally throws an error if the given document is not a map (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7c4fe9a9-c7f5-43e0-8aad-9035e32653cb"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-document {:my-namespace/my-key "My value" ...}<br>                {:check-ns? true})<br>=&gt;<br>{:my-namespace/my-key "My value" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q657ad222-2ba6-43f6-a8c6-21525e9d2492"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7781c157-6fd4-4485-a0b8-f18c1e21166e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7781c157-6fd4-4485-a0b8-f18c1e21166e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc910c042-9b1c-46ba-abe8-498dfd923372"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q17d254ae-a991-4de1-8fc4-4b3158757117"><button class="snippet--header" onClick="toggleCollapsible(&apos;q17d254ae-a991-4de1-8fc4-4b3158757117&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-documents
  ([documents]
   (check-documents documents {}))

  ([documents {:keys [e] :as options}]
   (letfn [(f0 [%] (check-document % options))]
          (cond (-&gt; documents vector/not-empty?) (-&gt; documents (vector/-&gt;items f0))
                (-&gt; e some?)                     (-&gt; e (ex-info {:documents documents}) throw)
                :return documents))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q46183ad7-2211-4831-9d85-12d04c824d12"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-document' function on the given documents.<br>- Options (excluding ':e') are passed to the 'check-document' function.<br>- Optionally throws an error if no document is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q42634c1f-dd28-4e48-b7f3-d5e73e033ac5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-documents [{:my-namespace/my-key "My value" ...}]<br>                 {:check-ns? true})<br>=&gt;<br>[{:my-namespace/my-key "My value" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q52bcae0c-5f55-424c-963a-d78e98db34e5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q96b6aebd-af67-4948-ac44-1a0f3b55dec2"><button class="snippet--header" onClick="toggleCollapsible(&apos;q96b6aebd-af67-4948-ac44-1a0f3b55dec2&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc0f5ba1a-a7bf-4053-ba19-12174e850540"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-projection"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-projection</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q20ccfc1c-cfa6-4c48-9917-4b9bc70fe834"><button class="snippet--header" onClick="toggleCollapsible(&apos;q20ccfc1c-cfa6-4c48-9917-4b9bc70fe834&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-projection
  ([projection]
   (check-projection projection {}))

  ([projection {:keys [check-empty? check-ns? check-type?]}]
   (cond (-&gt; projection map/empty?          (and check-empty?)) (-&gt; messages/PROJECTION-EMPTY-ERROR           (ex-info {:projection projection}) throw)
         (-&gt; projection map/namespaced? not (and check-ns?))    (-&gt; messages/NAMESPACED-PROJECTION-TYPE-ERROR (ex-info {:projection projection}) throw)
         (-&gt; projection map? not            (and check-type?))  (-&gt; messages/PROJECTION-TYPE-ERROR            (ex-info {:projection projection}) throw)
         (-&gt; projection map?)                                   (-&gt; projection))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qdda32d62-bbf1-4a7f-bf15-df84f682941a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given projection if provided as a map.<br>- Optionally throws an error if the given projection is an empty map (if ':check-empty?' is TRUE).<br>- Optionally throws an error if the given projection is not namespaced (if ':check-ns?' is TRUE).<br>- Optionally throws an error if the given projection is not a map (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q153b467b-7d9e-4edd-872d-585205f424d3"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-projection {:my-namespace/my-key -1 ...}<br>                  {:check-ns? true})<br>=&gt;<br>{:my-namespace/my-key -1 ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qe0f62d8a-e8d2-4506-8f1b-731d485a17f0"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8c9b798d-907c-4888-89d0-ed6862414cdc"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8c9b798d-907c-4888-89d0-ed6862414cdc&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qcb74e963-b140-4e61-a591-dca3561e7ddd"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-projections"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-projections</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qc966d6ba-85ba-48e2-8c80-32e41df0ea67"><button class="snippet--header" onClick="toggleCollapsible(&apos;qc966d6ba-85ba-48e2-8c80-32e41df0ea67&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-projections
  ([projections]
   (check-projections projections {}))

  ([projections {:keys [e] :as options}]
   (letfn [(f0 [%] (check-projection % options))]
          (cond (-&gt; projections vector/not-empty?) (-&gt; projections (vector/-&gt;items f0))
                (-&gt; e some?)                       (-&gt; e (ex-info {:projections projections}) throw)
                :return projections))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2659eb24-d198-4663-be32-5af177a02d36"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-projection' function on the given projections.<br>- Options (excluding ':e') are passed to the 'check-projection' function.<br>- Optionally throws an error if no projection is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf843196c-bd63-418b-b4a3-60e9fb9e6a93"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-projections [{:my-namespace/my-key -1 ...}]<br>                   {:check-ns? true})<br>=&gt;<br>[{:my-namespace/my-key -1 ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q5cbeae5b-35dd-47a0-8b25-5f2acd6c766b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">projections</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd67af52e-7c43-4192-81de-df7e4b5c315b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd67af52e-7c43-4192-81de-df7e4b5c315b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q1a66958e-969b-4475-8667-59e5f14eee68"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-query"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-query</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q85df1367-e8b5-4314-afd7-0aa82e142556"><button class="snippet--header" onClick="toggleCollapsible(&apos;q85df1367-e8b5-4314-afd7-0aa82e142556&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-query
  ([query]
   (check-query query {}))

  ([query {:keys [check-empty? check-ns? check-type?]}]
   (cond (-&gt; query map/empty?          (and check-empty?)) (-&gt; messages/QUERY-EMPTY-ERROR           (ex-info {:query query}) throw)
         (-&gt; query map/namespaced? not (and check-ns?))    (-&gt; messages/NAMESPACED-QUERY-TYPE-ERROR (ex-info {:query query}) throw)
         (-&gt; query map? not            (and check-type?))  (-&gt; messages/QUERY-TYPE-ERROR            (ex-info {:query query}) throw)
         (-&gt; query map?)                                   (-&gt; query))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q38e45ced-22ae-4bdb-b9da-3e951dea8817"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given query if provided as a map.<br>- Optionally throws an error if the given query is an empty map (if ':check-empty?' is TRUE).<br>- Optionally throws an error if the given query is not namespaced (if ':check-ns?' is TRUE).<br>- Optionally throws an error if the given query is not a map (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qba7d235a-1bc5-4eed-b723-eaa8a73be565"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-query {:my-namespace/my-key "My value"<br>              :$or [{:my-namespace/my-key "My value"}] ...}<br>             {:check-ns? true})<br>=&gt;<br>{:my-namespace/my-key "My value"<br> :$or [{:my-namespace/my-key "My value"}] ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qbd0f091e-40bb-4904-9a13-e0e80a0929bf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">query</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8136588e-3b63-45aa-baa5-301bbbe62ba6"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8136588e-3b63-45aa-baa5-301bbbe62ba6&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qaed480ba-a610-4d6d-8cb5-2826f680162d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-queries"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-queries</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfcdf382d-8250-43c0-b671-6e820b14534f"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfcdf382d-8250-43c0-b671-6e820b14534f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-queries
  ([queries]
   (check-queries queries {}))

  ([queries {:keys [e] :as options}]
   (letfn [(f0 [%] (check-query % options))]
          (cond (-&gt; queries vector/not-empty?) (-&gt; queries (vector/-&gt;items f0))
                (-&gt; e some?)                   (-&gt; e (ex-info {:queries queries}) throw)
                :return queries))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q3738d464-5bb1-41a7-b30c-216fba0682ad"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-query' function on the given queries.<br>- Options (excluding ':e') are passed to the 'check-query' function.<br>- Optionally throws an error if no query is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaef2f120-5015-4ae7-b612-55980e05db3c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-queries [{:my-namespace/my-key "My value"<br>                 :$or [{:my-namespace/my-key "My value"}] ...}]<br>               {:check-ns? true})<br>=&gt;<br>[{:my-namespace/my-key "My value"<br>  :$or [{:my-namespace/my-key "My value"}] ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9257ae93-b16f-4157-a803-120878c419f1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">queries</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q42bf89f5-464e-4f91-819d-85113a5a6783"><button class="snippet--header" onClick="toggleCollapsible(&apos;q42bf89f5-464e-4f91-819d-85113a5a6783&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q07deecc8-6a83-40ad-9657-848a82eb7a27"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="check-pipeline-stage"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-pipeline-stage</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfed09b72-de87-45d8-9f50-b13f1d97d5d7"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfed09b72-de87-45d8-9f50-b13f1d97d5d7&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-pipeline-stage
  ([pipeline-stage]
   (check-pipeline-stage pipeline-stage {}))

  ([pipeline-stage {:keys [check-empty? check-ns? check-type?]}]
   (cond (-&gt; pipeline-stage map/empty?          (and check-empty?)) (-&gt; messages/PIPILINE-STAGE-EMPTY-ERROR           (ex-info {:pipeline-stage pipeline-stage}) throw)
         (-&gt; pipeline-stage map/namespaced? not (and check-ns?))    (-&gt; messages/NAMESPACED-PIPILINE-STAGE-TYPE-ERROR (ex-info {:pipeline-stage pipeline-stage}) throw)
         (-&gt; pipeline-stage map? not            (and check-type?))  (-&gt; messages/PIPILINE-STAGE-TYPE-ERROR            (ex-info {:pipeline-stage pipeline-stage}) throw)
         (-&gt; pipeline-stage map?)                                   (-&gt; pipeline-stage))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q58add6ad-788a-4c35-82dc-35702a57dc51"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Returns the given pipeline stage if provided as a map.<br>- Optionally throws an error if the given pipeline stage is an empty map (if ':check-empty?' is TRUE).<br>- Optionally throws an error if the given pipeline stage is not namespaced (if ':check-ns?' is TRUE).<br>- Optionally throws an error if the given pipeline stage is not a map (if ':check-type?' is TRUE).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q04b68f02-aacd-47fe-a2da-d4e6062c07e1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-pipeline-stage {:$unset [:my-namespace/my-key]}<br>                      {:check-ns? true})<br>=&gt;<br>{:$unset [:my-namespace/my-key]}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qddc2cb63-deef-41c3-9cfa-5b083cdde76f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stage</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q0803020e-b63d-43c2-b17f-1abbd8ad7d62"><button class="snippet--header" onClick="toggleCollapsible(&apos;q0803020e-b63d-43c2-b17f-1abbd8ad7d62&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb3c0cb97-bc3c-4fd3-aaec-1055792ceab7"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">*</pre></div></div></div></div><div class="section" id="check-pipeline-stages"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">check-pipeline-stages</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qe2ce54bc-9b38-4614-84c7-9d6aefb7ac0b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qe2ce54bc-9b38-4614-84c7-9d6aefb7ac0b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn check-pipeline-stages
  ([pipeline-stages]
   (check-pipeline-stages pipeline-stages {}))

  ([pipeline-stages {:keys [e] :as options}]
   (letfn [(f0 [%] (check-pipeline-stage % options))]
          (cond (-&gt; pipeline-stages vector/not-empty?) (-&gt; pipeline-stages (vector/-&gt;items f0))
                (-&gt; e some?)                           (-&gt; e (ex-info {:pipeline-stages pipeline-stages}) throw)
                :return pipeline-stages))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb0ce33d2-1990-474e-a77c-3e2861ff3d72"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Applies the 'check-pipeline-stage' function on the given pipeline stages.<br>- Options (excluding ':e') are passed to the 'check-pipeline-stage' function.<br>- Optionally throws an error if no pipeline stage is provided (if ':e' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q03c25b74-c76b-467b-a78b-651fd1e50f82"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(check-pipeline-stages [{:$unset [:my-namespace/my-key]}<br>                        {:$match {:_id "MyObjectId"}}]<br>                       {:check-ns? true})<br>=&gt;<br>[{:$unset [:my-namespace/my-key]}<br> {:$match {:_id "MyObjectId"}}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb3d3172e-5d53-404e-b268-5e75c710f660"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">pipeline-stages</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa153af52-179c-4995-8a05-7fd1c4b16420"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa153af52-179c-4995-8a05-7fd1c4b16420&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:check-empty? (boolean)(opt)<br> :check-ns? (boolean)(opt)<br> :check-type? (boolean)(opt)<br> :e (string)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q848b23e5-9cd0-4dd1-a237-cc3156d30de6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">vector</pre></div></div></div></div><div class="section" id="assoc-document-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-document-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q52d91811-22f9-4ad6-a338-a9c0f08d26fa"><button class="snippet--header" onClick="toggleCollapsible(&apos;q52d91811-22f9-4ad6-a338-a9c0f08d26fa&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-document-id
  ([document]
   (assoc-document-id document {}))

  ([document {:keys [id-key]}]
   (if (-&gt; document some?)
       (if id-key (let [document-id (monger.tools/generate-id)]
                       (-&gt; document (monger.tools/assoc-value id-key document-id)))
                  (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q66fa2e2d-f09f-479d-934c-6deeac72c21b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Associates a randomly generated ObjectId string as document ID to the given document (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q34a3cd5c-f8d6-4f08-b44b-6715ed750a17"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-document-id {...}<br>                   {:id-key :my-id})<br>=&gt;<br>{:my-namespace/my-id "MyObjectId" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q2f19ea30-5d98-4e17-82d3-28289fd1a681"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6d2a15e1-9e8a-4c3b-acdc-c0b03ec7acb8"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6d2a15e1-9e8a-4c3b-acdc-c0b03ec7acb8&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qeb4ee64a-2435-46a2-9020-fda0bb0af412"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="assoc-documents-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-documents-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qf5146f17-fdbe-441c-96ac-10af52c4946c"><button class="snippet--header" onClick="toggleCollapsible(&apos;qf5146f17-fdbe-441c-96ac-10af52c4946c&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-documents-id
  ([documents]
   (assoc-documents-id documents {}))

  ([documents options]
   (letfn [(f0 [%] (assoc-document-id % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7e453c42-1632-4543-8cfb-772948794a53"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'assoc-document-id' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5cfa5b38-869a-4622-852a-3add2d1b31b1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-documents-id [{...}]<br>                    {:id-key :my-id})<br>=&gt;<br>[{:my-namespace/my-id "MyObjectId" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q2e572101-573b-4995-9a77-95652e117ec3"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfdd1d107-8242-45b2-9857-36e0262255de"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfdd1d107-8242-45b2-9857-36e0262255de&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q246ae8ae-5e2c-44a8-87c9-b7a08b8e902f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="dissoc-document-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">dissoc-document-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q97316eee-b5c3-496c-a108-770cb1ba2482"><button class="snippet--header" onClick="toggleCollapsible(&apos;q97316eee-b5c3-496c-a108-770cb1ba2482&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn dissoc-document-id
  ([document]
   (dissoc-document-id document {}))

  ([document {:keys [id-key]}]
   (if (-&gt; document some?)
       (if id-key (-&gt; document (monger.tools/dissoc-value id-key))
                  (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7535c12e-27e3-4ae5-bb99-4fa598454e67"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Dissociates the document ID from the given document (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q954df3fc-2c25-4c53-8ec2-6167be3796e5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(dissoc-document-id {:my-namespace/my-id "MyObjectId" ...}<br>                    {:id-key :my-id})<br>=&gt;<br>{...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4d123d9e-d2d1-4c6f-967d-eadebf80b2bf"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7f20d56a-161e-4e6a-ae9e-bd7a133c5767"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7f20d56a-161e-4e6a-ae9e-bd7a133c5767&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q8bf1ec87-eee4-4b67-8318-7a9d78b24f43"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="dissoc-documents-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">dissoc-documents-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfb374f87-a34f-4ce5-917a-da6947cde06e"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfb374f87-a34f-4ce5-917a-da6947cde06e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn dissoc-documents-id
  ([document]
   (dissoc-documents-id document {}))

  ([documents options]
   (letfn [(f0 [%] (dissoc-document-id % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf9fc37e4-5b80-4e9f-8239-d5269d41bc87"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'dissoc-document-id' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8326a65b-0808-45eb-acba-4797470aeb96"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(dissoc-documents-id [{:my-namespace/my-id "MyObjectId" ...}]<br>                     {:id-key :my-id})<br>=&gt;<br>[{...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q3bdba6eb-c026-44a0-84d4-96b35e8f39be"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qbc22c259-0456-4ed4-99ba-071d011e9ee9"><button class="snippet--header" onClick="toggleCollapsible(&apos;qbc22c259-0456-4ed4-99ba-071d011e9ee9&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q256970cc-2299-42bb-b847-3f80c3fafb26"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="assoc-document-copy-marker"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-document-copy-marker</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qcdd86700-ed99-42e7-b2f3-f80772fdd5f3"><button class="snippet--header" onClick="toggleCollapsible(&apos;qcdd86700-ed99-42e7-b2f3-f80772fdd5f3&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-document-copy-marker
  ([document]
   (assoc-document-copy-marker document {} (fn [] [])))

  ([document options]
   (assoc-document-copy-marker document options (fn [] [])))

  ([document {:keys [label-key]} get-documents-f]
   (if (-&gt; document some?)
       (if label-key (if-let [documents (get-documents-f)]
                             (let [document-label   (monger.tools/get-value document label-key)
                                   concurent-labels (vector/all-results documents #(monger.tools/get-value % label-key))
                                   copy-label       (gestures/item-label-&gt;copy-label document-label concurent-labels)]
                                  (monger.tools/assoc-value document label-key copy-label))
                             (-&gt; messages/FAILED-TO-GET-DOCUMENTS-ERROR Exception. throw))
                     (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa6a27fe5-e367-4ff0-9138-f96354bfb51e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Associates a copy marker to the label of the given document (if ':label-key' is provided),<br>based on the labels of other documents returned by the given 'get-documents-f' function.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf8478b0f-8737-4db5-a826-09aaafb191ad"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-document-copy-marker {:my-namespace/my-label "My label #1" ...}<br>                            {:label-key :my-label}<br>                            #(-&gt; [{:my-namespace/my-label "My label #1" ...}<br>                                  {:my-namespace/my-label "My label #2" ...}<br>                                  {:my-namespace/my-label "My label #3" ...}]))<br>=&gt;<br>{:my-namespace/my-label "My label #4" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q57deb15c-2151-46b7-97f8-9484ee3bdd0a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qebe62868-afc4-40a5-a020-0fe04e201e07"><button class="snippet--header" onClick="toggleCollapsible(&apos;qebe62868-afc4-40a5-a020-0fe04e201e07&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:label-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa8349b67-83b9-4b6d-9cd6-5ca936f04f3b"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa8349b67-83b9-4b6d-9cd6-5ca936f04f3b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">function</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">get-documents-f</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Must return maps in a vector.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc482213b-3b08-4d3d-bd9b-67c5d9989482"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="assoc-documents-copy-marker"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-documents-copy-marker</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q9ead09c9-700f-4336-b399-b90c11fe679e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q9ead09c9-700f-4336-b399-b90c11fe679e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-documents-copy-marker
  ([documents]
   (assoc-documents-copy-marker documents {} (fn [] [])))

  ([documents options]
   (assoc-documents-copy-marker documents options (fn [] [])))

  ([documents {:keys [label-key] :as options} get-documents-f]
   (letfn [(f1 [result dex %] (vector/all-results result #(monger.tools/get-value % label-key)))
           (f0 [result dex %] (if (-&gt; dex zero?) (assoc-document-copy-marker % options get-documents-f)
                                                 (assoc-document-copy-marker % options (fn [] (vector/concat-items (get-documents-f) (f1 result dex %))))))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0 {:provide-dex? true :provide-result? true}))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qd6c4a6b7-f3a7-4e44-b348-af47fb4b2617"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'assoc-document-copy-marker' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qbd4ec5cf-babd-4006-a56b-d2fe9ca69f63"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-documents-copy-marker [{:my-namespace/my-label "My label #1" ...}<br>                              {:my-namespace/my-label "My label #2" ...}]<br>                             {:label-key :my-label}<br>                             #(-&gt; [{:my-namespace/my-label "My label #1" ...}<br>                                   {:my-namespace/my-label "My label #2" ...}<br>                                   {:my-namespace/my-label "My label #3" ...}]))<br>=&gt;<br>[{:my-namespace/my-label "My label #4" ...}<br> {:my-namespace/my-label "My label #5" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qdb0c0ec2-3b7c-44ea-a0d0-92b7c0f7f33d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q5649076f-56cd-4783-9d38-3cd1cfcf1bb3"><button class="snippet--header" onClick="toggleCollapsible(&apos;q5649076f-56cd-4783-9d38-3cd1cfcf1bb3&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:label-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q4a7830b7-c65a-4679-af05-a9af34ea92cb"><button class="snippet--header" onClick="toggleCollapsible(&apos;q4a7830b7-c65a-4679-af05-a9af34ea92cb&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">function</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">get-documents-f</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Must return maps in a vector.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qdbe8f903-6682-4c4d-b9ba-de1c18bcc9a4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="normalize-database-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-database-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q3b959e12-e382-433e-b76c-e70694060c24"><button class="snippet--header" onClick="toggleCollapsible(&apos;q3b959e12-e382-433e-b76c-e70694060c24&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-database-name
  [database-name]
  (if (-&gt; database-name  some?)
      (-&gt; database-name keyword)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q0678e888-9929-4f92-9864-40987c713ee4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given database name into a keyword.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa34a6a53-8edd-43a9-9ed0-6153bf235674"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-database-name "my-database")<br>=&gt;<br>:my-database</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9b61d98a-e7a8-4089-879b-1afaa88dd0eb"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qace863d6-b50b-4ccf-97bc-32db8836fb2a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre></div></div></div></div><div class="section" id="normalize-databases-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-databases-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qc8dbe05b-ee2d-4fa3-a0a3-ff37c6506f6e"><button class="snippet--header" onClick="toggleCollapsible(&apos;qc8dbe05b-ee2d-4fa3-a0a3-ff37c6506f6e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-databases-name
  [database-names]
  (if (-&gt; database-names some?)
      (-&gt; database-names (vector/-&gt;items normalize-database-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q93b30170-67f9-4387-acb1-f41d2f9b8710"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-database-name' function on the given database names.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qbccebf38-80a1-4817-896a-efce3b358ea0"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-databases-name ["my-database" "another-database"])<br>=&gt;<br>[:my-database :another-database]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q63ede028-1eca-4666-a0d6-8ef8b318f7c1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">database-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qac769008-992b-4443-801d-0035254c70b4"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre></div></div></div></div><div class="section" id="normalize-collection-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-collection-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q07d6b92b-837b-40cc-9d1d-fbe7d9922627"><button class="snippet--header" onClick="toggleCollapsible(&apos;q07d6b92b-837b-40cc-9d1d-fbe7d9922627&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-collection-name
  [collection-name]
  (if (-&gt; collection-name some?)
      (-&gt; collection-name syntax/to-kebab-case keyword)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q926c0175-4fa9-4de7-b88a-ec0297270446"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given collection name into a keyword in kebab-case form.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q18204fdf-8984-40e1-95bb-59bf4775d52e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-collection-name "my_collection")<br>=&gt;<br>:my-collection</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q0e2845d3-4c8d-4471-87f4-d7d729684170"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-name</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q15afb97b-1411-4812-a0c0-db8b42992df9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre></div></div></div></div><div class="section" id="normalize-collections-name"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-collections-name</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6987d77f-2489-40e5-b54f-9fbcc35fb4fa"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6987d77f-2489-40e5-b54f-9fbcc35fb4fa&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-collections-name
  [collection-names]
  (if (-&gt; collection-names some?)
      (-&gt; collection-names (vector/-&gt;items normalize-collection-name))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q64d643ee-770d-4c1c-a58a-f8af89ca8dc9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-collection-name' function on the given collection names.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qb2ce8a2f-a350-45a4-833a-b7048d8f45e9"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-collections-name ["my_collection" "another_collection"])<br>=&gt;<br>[:my-collection :another-collection]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q3db0026d-3150-42c3-839e-4b87f381cb89"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-names</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q678bb05e-4b94-4a21-b868-0bfc79042c92"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre></div></div></div></div><div class="section" id="normalize-collection-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-collection-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q0bb506f4-8dd6-4d68-863c-ca97ab71f82f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q0bb506f4-8dd6-4d68-863c-ca97ab71f82f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-collection-namespace
  [collection-namespace]
  (if (-&gt; collection-namespace some?)
      (-&gt; collection-namespace keyword)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qd7ed309b-5e8e-4530-9152-7a5461b34225"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given collection namespace into a keyword.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe271a13f-0f2d-4c59-a38a-8c448a4ab074"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-collection-namespace "my-namespace")<br>=&gt;<br>:my-namespace</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q90b2d7b9-b093-4f27-b02f-54441a36b5f8"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespace</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q34563e92-7f7a-4970-a37b-cabfebe5656b"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre></div></div></div></div><div class="section" id="normalize-collections-namespace"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-collections-namespace</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q03f79025-49f5-4c9c-ab9f-1bfdfc366b8f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q03f79025-49f5-4c9c-ab9f-1bfdfc366b8f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-collections-namespace
  [collection-namespaces]
  (if (-&gt; collection-namespaces some?)
      (-&gt; collection-namespaces (vector/-&gt;items normalize-collection-namespace))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc1455433-9412-4168-9eeb-0acabef655ef"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-collection-namespace' function on the given collection namespaces.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe547cf0d-8e04-4547-9298-f5447f88df86"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-collections-namespaces ["my-namespace" "another-namespace"])<br>=&gt;<br>[:my-namespace :another-namespace]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qfa419e6b-c29e-48a2-b02c-6a0ec520fa39"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">collection-namespaces</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qfe3836d2-92aa-424e-81d7-b9022db40246"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre></div></div></div></div><div class="section" id="normalize-locale"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-locale</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qc08482db-73fc-4a57-8d43-abc7691855fb"><button class="snippet--header" onClick="toggleCollapsible(&apos;qc08482db-73fc-4a57-8d43-abc7691855fb&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-locale
  [locale]
  (if (-&gt; locale some?)
      (-&gt; locale keyword)))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q72c2e210-877e-4962-98ff-c86185b9bb74"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Converts the given locale into a keyword.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf61d8d00-c317-4dfd-bd5d-6a74433b150a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-locale "my-locale")<br>=&gt;<br>:my-locale</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q18c8d8ea-f5eb-4e91-9e82-62569599e99d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locale</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q30a26683-5ac2-4b97-8e58-8c2b9dfe4596"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keyword</pre></div></div></div></div><div class="section" id="normalize-locales"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-locales</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q161309d6-45e3-479a-953a-0bdca6da91fb"><button class="snippet--header" onClick="toggleCollapsible(&apos;q161309d6-45e3-479a-953a-0bdca6da91fb&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-locales
  [locales]
  (if (-&gt; locales some?)
      (-&gt; locales (vector/-&gt;items normalize-locale))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q85406cc2-76a7-4482-9c36-2474a2314add"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-locale' function on the given locales.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q89628995-301a-49e9-b7f4-a120acc35ba2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-locales ["my-locale" "another-locale"])<br>=&gt;<br>[:my-locale :another-locale]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q161f049b-9844-4971-8c8d-0d1994adba67"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">locales</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qf89568f1-84ca-422c-926b-91947ddb49c7"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">keywords in vector</pre></div></div></div></div><div class="section" id="unparse-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">unparse-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q6d9d28a0-c99f-4e8d-9ea4-8cbc54291481"><button class="snippet--header" onClick="toggleCollapsible(&apos;q6d9d28a0-c99f-4e8d-9ea4-8cbc54291481&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn unparse-id
  [id]
  (if (-&gt; id some?)
      (if (-&gt; id monger.tools/object-id?)
          (-&gt; id str)
          (-&gt; id))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qe36e1c54-9683-44d0-965f-3a8cfa1d2dac"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Unparses the given ObjectId object into a string.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qd225be9c-33fa-4048-86d2-ddbe2359a732"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(unparse-id #&lt;ObjectId MyObjectId&gt;)<br>=&gt;<br>"MyObjectId"</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q22cba772-ee5f-4cbc-b7ea-b97894b60fee"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">org.bson.types.ObjectId object</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">id</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qff15965e-863e-4e7b-a0e0-574b55781702"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">string</pre></div></div></div></div><div class="section" id="unparse-ids"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">unparse-ids</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa0ca8071-c4ee-421e-959f-38e9da128c66"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa0ca8071-c4ee-421e-959f-38e9da128c66&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn unparse-ids
  [ids]
  (if (-&gt; ids some?)
      (-&gt; ids (vector/-&gt;items unparse-id))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q86b29a1d-ea73-4751-ba03-eaea018e73f3"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'unparse-id' function on the given ObjectId objects.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q16ae20e2-9b6d-4dae-8333-6b4bc1d50596"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(unparse-ids [#&lt;ObjectId MyObjectId&gt; #&lt;ObjectId AnotherObjectId&gt;])<br>=&gt;<br>["MyObjectId" "AnotherObjectId"]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb207811c-86f5-4616-ae9c-38da1f046e24"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">org.bson.types.ObjectId objects in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">ids</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qceb61d4e-14c8-4621-8eb5-99ff3a5b6ab7"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">strings in vector</pre></div></div></div></div><div class="section" id="normalize-document-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-document-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q32993f4a-2c70-4c3d-bf06-c1148325b8e0"><button class="snippet--header" onClick="toggleCollapsible(&apos;q32993f4a-2c70-4c3d-bf06-c1148325b8e0&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-document-id
  ([document]
   (normalize-document-id document {}))

  ([document {:keys [id-key]}]
   (if (-&gt; document some?)
       (if id-key (-&gt; document (map/move-some :_id (map/specify-key document id-key)))
                  (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2ab810ca-b6c8-43ce-b7be-35ccb2297ba5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Renames the ':_id' key (MongoDB compatible) to the given ID key within the given document (if ':id-key' is provided).</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q194eaf93-bdaf-4de9-92e6-29ef410c9276"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-document-id {:_id "MyObjectId" ...}<br>                       {:id-key :my-id})<br>=&gt;<br>{:my-namespace/my-id "MyObjectId" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qcfb3d665-dbe0-4918-abfd-b0855efd6751"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7bf4d616-d006-4af2-8a6b-a503a465f8c9"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7bf4d616-d006-4af2-8a6b-a503a465f8c9&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa52de94d-4bed-4dc2-ac3b-9c16ce7f6492"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="normalize-documents-id"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-documents-id</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q9597e431-40ed-4078-a71e-d4ae0c11e0a7"><button class="snippet--header" onClick="toggleCollapsible(&apos;q9597e431-40ed-4078-a71e-d4ae0c11e0a7&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-documents-id
  ([documents]
   (normalize-documents-id documents {}))

  ([documents options]
   (letfn [(f0 [%] (normalize-document-id % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q6790fb5b-81e8-43b4-8d55-a326bbbe148f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-document-id' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa96676e4-ce95-4dad-ba5f-709a6e21082e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-documents-id [{:_id "MyObjectId" ...}]<br>                        {:id-key :my-id})<br>=&gt;<br>[{:my-namespace/my-id "MyObjectId" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q68d443e6-da85-4296-b5b6-1278c2bac393"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q353951da-1fdb-4101-9a93-835f870b4b50"><button class="snippet--header" onClick="toggleCollapsible(&apos;q353951da-1fdb-4101-9a93-835f870b4b50&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:id-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q29f46aa0-dfcd-4e06-b2e4-23670c13ed9a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="normalize-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q20cde789-353a-4c29-9fd5-eb0994994a2b"><button class="snippet--header" onClick="toggleCollapsible(&apos;q20cde789-353a-4c29-9fd5-eb0994994a2b&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-document
  ([document]
   (normalize-document document {}))

  ([document {:keys [keywordize-keys? keywordize-values? unparse-id? unparse-timestamps?]}]
   (if (-&gt;     document some?)
       (cond-&gt; document keywordize-keys?    (json/keywordize-keys)
                        keywordize-values?  (json/keywordize-values)
                        unparse-id?         (map/update-some :_id unparse-id)
                        unparse-timestamps? (time/unparse-timestamps)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qcfa98492-6869-4106-bb33-0e0536059271"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">1. Optionally converts string type keys and values into keywords within the given document (if they were converted from keywords).<br>2. Optionally unparses date and time objects into strings within the given document.<br>3. Optionally unparses the document ID object into string within the given document.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc22d76d0-543f-4ee2-bbc1-f4f6b55cf020"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q0d659120-5aa8-424d-81d7-47af0c91d6bb"><button class="snippet--header" onClick="toggleCollapsible(&apos;q0d659120-5aa8-424d-81d7-47af0c91d6bb&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:keywordize-keys? (boolean)(opt)<br> :keywordize-values? (boolean)(opt)<br> :unparse-id? (boolean)(opt)<br> :unparse-timestamps? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6517efea-f144-4637-956b-0017c556926f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q5ed1823f-28b4-495c-9290-befac0a91881"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">example</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-document {"_id"                       #&lt;ObjectId MyObjectId&gt;<br>                     "my-namespace/my-keyword"   "*:my-value"<br>                     "my-namespace/my-string"    "My value"<br>                     "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt; ...}<br>                    {:keywordize-keys? true :keywordize-values? true :unparse-id? true :unparse-timestamps? true})<br>=&gt;<br>{:_id                       "MyObjectId"<br> :my-namespace/my-keyword   :my-value<br> :my-namespace/my-string    "My value"<br> :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z" ...}</pre></div></div></div></div><div class="section" id="normalize-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">normalize-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q010fcb97-e064-4795-87d2-623c042060b9"><button class="snippet--header" onClick="toggleCollapsible(&apos;q010fcb97-e064-4795-87d2-623c042060b9&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn normalize-documents
  ([documents]
   (normalize-documents documents {}))

  ([documents options]
   (letfn [(f0 [%] (normalize-document % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q259a76cc-f2f2-4185-b0f8-81ab002cbc73"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'normalize-document' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q286916ed-1d27-4232-a968-85fedaadb8e7"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(normalize-documents [{"_id"                       #&lt;ObjectId MyObjectId&gt;<br>                       "my-namespace/my-keyword"   "*:my-value"<br>                       "my-namespace/my-string"    "My value"<br>                       "my-namespace/my-timestamp" #&lt;DateTime 2020-04-20T16:20:00.123Z&gt; ...}]<br>                     {:keywordize-keys? true :keywordize-values? true :unparse-id? true :unparse-timestamps? true})<br>=&gt;<br>[{:_id                       "MyObjectId"<br>  :my-namespace/my-keyword   :my-value<br>  :my-namespace/my-string    "My value"<br>  :my-namespace/my-timestamp "2020-04-20T16:20:00.000Z" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q51a67b76-0d79-413e-ac08-5fc3c0c29363"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q27c70841-7721-4ac8-9b1b-63bebb6a37d8"><button class="snippet--header" onClick="toggleCollapsible(&apos;q27c70841-7721-4ac8-9b1b-63bebb6a37d8&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:keywordize-keys? (boolean)(opt)<br> :keywordize-values? (boolean)(opt)<br> :unparse-id? (boolean)(opt)<br> :unparse-timestamps? (boolean)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q79fc0dd0-bd9a-43d9-a425-bb03b8cc3573"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="assoc-document-position"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-document-position</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfc83e455-8860-4369-ba05-b75abbb194f3"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfc83e455-8860-4369-ba05-b75abbb194f3&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-document-position
  ([document]
   (assoc-document-position document {} (fn [] 0)))

  ([document options]
   (assoc-document-position document options (fn [] 0)))

  ([document {:keys [position-key]} get-document-count-f]
   (if (-&gt; document some?)
       (if position-key (if-let [document-count (get-document-count-f)]
                                (-&gt; document (monger.tools/assoc-value position-key (inc document-count)))
                                (-&gt; messages/FAILED-TO-COUNT-DOCUMENTS-ERROR Exception. throw))
                        (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qcb7fcf27-5794-4003-b746-06ef6fa9162f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Associates a virtual position value (if ':position-key' is provided) to the given document,<br>based on the output of the given 'get-document-count-f' function.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf81d70e7-619d-499a-9f9b-8c3504fe9f91"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-document-position {...}<br>                         {:position-key :my-position}<br>                         #(-&gt; 420))<br>=&gt;<br>{:my-namespace/my-position 421 ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q69c34f9f-cd83-426c-9cb3-8efb387171ab"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q9ff941e1-022f-4246-ab28-f9cf1c6f4631"><button class="snippet--header" onClick="toggleCollapsible(&apos;q9ff941e1-022f-4246-ab28-f9cf1c6f4631&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:position-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q47a7a7e2-64c9-43d4-b54a-d2ff085f3e8f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q47a7a7e2-64c9-43d4-b54a-d2ff085f3e8f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">function</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">get-document-count-f</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Must return an integer.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qc65bad98-ca39-4ab6-b295-c1094f795a0a"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="assoc-documents-position"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">assoc-documents-position</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qd85f0f04-1691-46e0-9a4f-e226f5401973"><button class="snippet--header" onClick="toggleCollapsible(&apos;qd85f0f04-1691-46e0-9a4f-e226f5401973&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn assoc-documents-position
  ([documents]
   (assoc-documents-position documents {} (fn [] 0)))

  ([documents options]
   (assoc-documents-position documents options (fn [] 0)))

  ([documents options get-document-count-f]
   (letfn [(f0 [dex %] (if (-&gt; dex zero?) (assoc-document-position % options get-document-count-f)
                                          (assoc-document-position % options (fn [] (+ (get-document-count-f) dex)))))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0 {:provide-dex? true}))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q9f238bcf-cb1b-4603-9c7b-278ab20b57a6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'assoc-document-position' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q942e02e2-2199-4e53-8f02-5636a2590dc2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(assoc-documents-position [{...} {...}]<br>                          {:position-key :my-position}<br>                          #(-&gt; 420))<br>=&gt;<br>[{:my-namespace/my-position 421 ...}<br> {:my-namespace/my-position 422 ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q7cd15723-982f-4303-8c0e-c954b22bbbba"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q8646eb7d-b5e8-4bb0-9dd0-145060a7485f"><button class="snippet--header" onClick="toggleCollapsible(&apos;q8646eb7d-b5e8-4bb0-9dd0-145060a7485f&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:position-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q99377641-981d-4b9a-970c-559ba71372c2"><button class="snippet--header" onClick="toggleCollapsible(&apos;q99377641-981d-4b9a-970c-559ba71372c2&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">function</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">get-document-count-f</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Must return an integer.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qacbb939f-ddf2-432a-bfc4-3d3158fcf4af"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="shift-document-position"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">shift-document-position</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q578f95b6-2faa-440a-88ed-e18e3ef1aa60"><button class="snippet--header" onClick="toggleCollapsible(&apos;q578f95b6-2faa-440a-88ed-e18e3ef1aa60&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn shift-document-position
  ([document]
   (shift-document-position document {}))

  ([document {:keys [position-key]}]
   (if (-&gt; document some?)
       (if position-key (if (-&gt; document (monger.tools/get-value    position-key))
                            (-&gt; document (monger.tools/update-value position-key inc))
                            (-&gt; messages/MISSING-DOCUMENT-POSITION-ERROR Exception. throw))
                        (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2a70ac03-4496-40c9-81bf-65964725f651"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">- Increases the virtual position value within the given document (if ':position-key' is provided).<br>- Throws an error if the virtual position value is NIL.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf5fec857-becd-4cac-a8f7-3bb8bc7f0425"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(shift-document-position {:my-namespace/my-position 420 ...}<br>                         {:position-key :my-position})<br>=&gt;<br>{:my-namespace/my-position 421 ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q0022d210-b887-4097-93e5-39a3562582b2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q50787079-e129-4e66-ac30-35c52e1166e0"><button class="snippet--header" onClick="toggleCollapsible(&apos;q50787079-e129-4e66-ac30-35c52e1166e0&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:position-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q712ca5f5-12c2-4223-91b7-58c52e975c2d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="shift-documents-position"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">shift-documents-position</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q86ed9f92-e6d2-479a-bcdc-4e3d2b55b950"><button class="snippet--header" onClick="toggleCollapsible(&apos;q86ed9f92-e6d2-479a-bcdc-4e3d2b55b950&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn shift-documents-position
  ([documents]
   (shift-documents-position documents {}))

  ([documents options]
   (letfn [(f0 [%] (shift-document-position % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc6c680a7-c21b-49ce-99e2-714b4c52e826"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'shift-document-position' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q25193b90-7d26-4e5a-8253-b2d571a254ff"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(shift-documents-position [{:my-namespace/my-position 420 ...}]<br>                          {:position-key :my-position})<br>=&gt;<br>[{:my-namespace/my-position 421 ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qb4226130-7a3f-4f35-89a5-5bdd175ab47c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7f3c96b6-501a-4b7b-91ec-60feba8a1477"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7f3c96b6-501a-4b7b-91ec-60feba8a1477&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:position-key (keyword)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qd040475e-b8f7-4746-887a-c1c26d2f03da"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="postpare-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">postpare-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q48047e4c-6c50-4f3a-ac12-8ce093cbee52"><button class="snippet--header" onClick="toggleCollapsible(&apos;q48047e4c-6c50-4f3a-ac12-8ce093cbee52&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn postpare-document
  ([document]
   (postpare-document document {}))

  ([document {:keys [postpare-f]}]
   (if (-&gt; document some?)
       (if postpare-f (-&gt; document postpare-f)
                      (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q0fd3aeb1-7071-4d29-9520-3662a2eb1555"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the given 'postpare-f' function (if any) on the given document.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q14a77e40-19de-4934-880c-c948dc686524"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(postpare-document {...}<br>                   {:postpare-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>{:my-namespace/my-key "My value" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qd9b83124-1fd7-4d1a-a560-f40a30034dac"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q15540f5e-91f9-4e19-a884-2c8314a082d1"><button class="snippet--header" onClick="toggleCollapsible(&apos;q15540f5e-91f9-4e19-a884-2c8314a082d1&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:postpare-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qa64c6ad1-af53-4a14-8017-acc0544b4c18"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="postpare-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">postpare-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q2843bc8e-31f3-4107-8d25-ed31b324cd70"><button class="snippet--header" onClick="toggleCollapsible(&apos;q2843bc8e-31f3-4107-8d25-ed31b324cd70&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn postpare-documents
  ([documents]
   (postpare-documents documents {}))

  ([documents options]
   (letfn [(f0 [%] (postpare-document % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaabcaa1c-ff3b-4d99-88b1-d7980c07cb47"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'postpare-document' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qca87fe38-8d51-44c6-b657-c413552283a6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(postpare-documents [{...}]<br>                    {:postpare-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>[{:my-namespace/my-key "My value" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q005febbe-af9f-4a83-94ed-787094fd036e"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q1adde61f-0c88-413a-b491-87a6b0f9875e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q1adde61f-0c88-413a-b491-87a6b0f9875e&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:postpare-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q6055fb31-1bdd-45bc-995f-df351b50155c"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="prepare-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">prepare-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qdce26be2-e9b7-44f9-a421-fef6926f6cbb"><button class="snippet--header" onClick="toggleCollapsible(&apos;qdce26be2-e9b7-44f9-a421-fef6926f6cbb&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn prepare-document
  ([document]
   (prepare-document document {}))

  ([document {:keys [prepare-f]}]
   (if (-&gt; document some?)
       (if prepare-f (-&gt; document prepare-f)
                     (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaeb4d1cc-4ff0-4e40-a178-65a4940769f3"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the given 'prepare-f' function (if any) on the given document.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf61a37e1-f3cb-47a9-bfb1-c7121e18c3ec"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(prepare-document {...}<br>                  {:prepare-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>{:my-namespace/my-key "My value" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qe1212855-6e96-4f44-a1bd-8b714f3f1a39"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q252e4897-5860-4a49-8fcc-e924e3699d1a"><button class="snippet--header" onClick="toggleCollapsible(&apos;q252e4897-5860-4a49-8fcc-e924e3699d1a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:prepare-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4ea99f2f-98df-4125-be66-91dcbf654cf3"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="prepare-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">prepare-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q42f64b65-e125-4830-ac1b-98eb36e0e30a"><button class="snippet--header" onClick="toggleCollapsible(&apos;q42f64b65-e125-4830-ac1b-98eb36e0e30a&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn prepare-documents
  ([documents]
   (prepare-documents documents {}))

  ([documents options]
   (letfn [(f0 [%] (prepare-document % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qee9b173c-0770-4b67-b87c-d443998e42f2"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'prepare-document' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q6e93a730-86d7-4358-a5b2-54e907d77adb"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(prepare-documents [{...}]<br>                   {:prepare-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>[{:my-namespace/my-key "My value" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q58619d95-1120-48d1-b133-ab8c59613821"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qfce743f6-f6de-4665-aef0-251573ac4b75"><button class="snippet--header" onClick="toggleCollapsible(&apos;qfce743f6-f6de-4665-aef0-251573ac4b75&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:prepare-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qef3dac12-4695-48ab-9356-1f7a3197e3af"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div><div class="section" id="prototype-document"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">prototype-document</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q38e7ac08-c3b0-4e88-ad96-5099804991be"><button class="snippet--header" onClick="toggleCollapsible(&apos;q38e7ac08-c3b0-4e88-ad96-5099804991be&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn prototype-document
  ([document]
   (prototype-document document {}))

  ([document {:keys [prototype-f]}]
   (if (-&gt; document some?)
       (if prototype-f (-&gt; document prototype-f)
                       (-&gt; document)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa3ca2667-7bc2-4ee8-9c43-9a302ac9dfd5"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the given 'prototype-f' function (if any) on the given document.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q34006e10-6242-4b97-8e79-e1757d45a975"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(prototype-document {...}<br>                    {:prototype-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>{:my-namespace/my-key "My value" ...}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qaa31fb31-3ae8-4327-9fd6-e824d5e4e174"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">document</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q70a3fcc0-e716-4115-89d5-054a16a21a28"><button class="snippet--header" onClick="toggleCollapsible(&apos;q70a3fcc0-e716-4115-89d5-054a16a21a28&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:prototype-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q83f4d43e-41d5-41d9-8f9b-e4150bdbf9a1"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre></div></div></div></div><div class="section" id="prototype-documents"><div class="section--header"><pre class="color--soft-grey text--xxs text--uppercase">defn</pre><pre class="color--hard-blue text--xxl text--bold">prototype-documents</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qca36f20f-aba7-4d05-9036-687a36ab0d56"><button class="snippet--header" onClick="toggleCollapsible(&apos;qca36f20f-aba7-4d05-9036-687a36ab0d56&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">source-code</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(defn prototype-documents
  ([documents]
   (prototype-documents documents {}))

  ([documents options]
   (letfn [(f0 [%] (prototype-document % options))]
          (if (-&gt; documents some?)
              (-&gt; documents (vector/-&gt;items f0))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf862fd5e-7b64-4671-a9a5-0102a79ccc44"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">description</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">Applies the 'prototype-document' function on the given documents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qcc96c5cf-8481-4283-869d-5edb4f87c55f"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">usage</pre></div><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">(prototype-documents [{...}]<br>                     {:prototype-f (fn [%] (assoc % :my-namespace/my-key "My value"))})<br>=&gt;<br>[{:my-namespace/my-key "My value" ...}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q2f9a6b5b-f6e3-42ca-8def-593117eded7d"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">documents</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qba0d8915-6a4a-47c8-9935-d2bcfdc2b647"><button class="snippet--header" onClick="toggleCollapsible(&apos;qba0d8915-6a4a-47c8-9935-d2bcfdc2b647&apos;)"><pre class="text--uppercase color--soft-grey text--xxs ">param</pre><pre class="text--uppercase color--soft-grey text--xxs ">map</pre><pre class="text--uppercase color--soft-grey text--xxs ">opt</pre><pre class="text--uppercase text--bold color--hard-grey text--xxs">options</pre></button><div class="snippet--text"><pre class="text--boxed scroll-x color--hard-grey text--s">{:prototype-f (function)(opt)}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qabf4fe91-f180-4fcf-9fa0-0b46db64feb6"><div class="snippet--header"><pre class="text--uppercase color--soft-grey text--xxs ">return</pre><pre class="text--uppercase color--soft-grey text--xxs ">maps in vector</pre></div></div></div></div></div><div id="top-bar"><pre class="text--xxl text--bold" id="top-bar--library-name">monger-utils</pre><pre class="color--soft-grey text--s" id="top-bar--library-version">0.8.2.4</pre><a class="text--s" href="https://github.com/mt-extensions/monger-utils" id="top-bar--library-uri"><pre class="color--hard-blue">github.com/mt-extensions/monger-utils</pre></a></div><div id="bottom-bar"><a class="color--soft-purple text--s" href="https://github.com/mt-devtools/clj-source-code-documentation" id="bottom-bar--credits-link"><pre>github.com/mt-devtools/clj-source-code-documentation</pre></a></div></body></html></html>
